!function(){"use strict";var t={56:function(t,e,i){i.r(e),i.d(e,{AlphaTimeline:function(){return at},Animation:function(){return v},AnimationState:function(){return bt},AnimationStateAdapter:function(){return St},AnimationStateData:function(){return Rt},AssetManagerBase:function(){return se},AtlasAttachmentLoader:function(){return $t},Attachment:function(){return p},AttachmentTimeline:function(){return ht},BinaryInput:function(){return ye},BlendMode:function(){return Nt},Bone:function(){return ee},BoneData:function(){return te},BoundingBoxAttachment:function(){return Yt},CURRENT:function(){return Ft},ClippingAttachment:function(){return Xt},Color:function(){return n},ConstraintData:function(){return ie},CurveTimeline:function(){return _},CurveTimeline1:function(){return j},CurveTimeline2:function(){return G},DebugUtils:function(){return u},DeformTimeline:function(){return ct},Downloader:function(){return re},DrawOrderTimeline:function(){return dt},Event:function(){return ne},EventData:function(){return ae},EventQueue:function(){return vt},EventTimeline:function(){return ut},EventType:function(){return At},FIRST:function(){return Ct},FakeTexture:function(){return qt},HOLD_FIRST:function(){return It},HOLD_MIX:function(){return kt},HOLD_SUBSEQUENT:function(){return Mt},IkConstraint:function(){return oe},IkConstraintData:function(){return le},IkConstraintTimeline:function(){return ft},IntSet:function(){return s},Interpolation:function(){return o},MathUtils:function(){return a},MeshAttachment:function(){return Zt},MixBlend:function(){return A},MixDirection:function(){return S},PathAttachment:function(){return Kt},PathConstraint:function(){return ce},PathConstraintData:function(){return he},PathConstraintMixTimeline:function(){return xt},PathConstraintPositionTimeline:function(){return gt},PathConstraintSpacingTimeline:function(){return pt},PointAttachment:function(){return Jt},Pool:function(){return d},PositionMode:function(){return Vt},Pow:function(){return l},PowOut:function(){return h},RGB2Timeline:function(){return lt},RGBA2Timeline:function(){return ot},RGBATimeline:function(){return rt},RGBTimeline:function(){return nt},RegionAttachment:function(){return Qt},RotateMode:function(){return Ut},RotateTimeline:function(){return H},SETUP:function(){return Et},SUBSEQUENT:function(){return Tt},ScaleTimeline:function(){return Q},ScaleXTimeline:function(){return $},ScaleYTimeline:function(){return tt},SequenceTimeline:function(){return wt},ShearTimeline:function(){return et},ShearXTimeline:function(){return it},ShearYTimeline:function(){return st},Skeleton:function(){return fe},SkeletonBinary:function(){return be},SkeletonBounds:function(){return Ze},SkeletonClipping:function(){return Je},SkeletonData:function(){return me},SkeletonJson:function(){return Qe},Skin:function(){return pe},SkinEntry:function(){return ge},Slot:function(){return ue},SlotData:function(){return xe},SpacingMode:function(){return Ot},StringSet:function(){return r},Texture:function(){return Bt},TextureAtlas:function(){return _t},TextureAtlasPage:function(){return Gt},TextureAtlasRegion:function(){return Ht},TextureFilter:function(){return Lt},TextureRegion:function(){return zt},TextureWrap:function(){return Pt},TimeKeeper:function(){return m},Timeline:function(){return q},TrackEntry:function(){return yt},TransformConstraint:function(){return de},TransformConstraintData:function(){return we},TransformConstraintTimeline:function(){return mt},TransformMode:function(){return Dt},TranslateTimeline:function(){return Z},TranslateXTimeline:function(){return K},TranslateYTimeline:function(){return J},Triangulator:function(){return Ke},Utils:function(){return c},Vector2:function(){return f},VertexAttachment:function(){return x},WindowedMean:function(){return g}});class s{constructor(){this.array=new Array}add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}}class r{constructor(){this.entries={},this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,s=t.length;i<s;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}class n{constructor(t=0,e=0,i=0,s=0){this.r=t,this.g=e,this.b=i,this.a=s}set(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,s){return this.r+=t,this.g+=e,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new n).setFromString(t)}}n.WHITE=new n(1,1,1,1),n.RED=new n(1,0,0,1),n.GREEN=new n(0,1,0,1),n.BLUE=new n(0,0,1,1),n.MAGENTA=new n(1,0,1,1);class a{static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*a.degRad)}static sinDeg(t){return Math.sin(t*a.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return a.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,i){let s=Math.random(),r=e-t;return s<=(i-t)/r?t+Math.sqrt(s*r*(i-t)):e-Math.sqrt((1-s)*r*(e-i))}static isPowerOfTwo(t){return t&&0==(t&t-1)}}a.PI=3.1415927,a.PI2=2*a.PI,a.radiansToDegrees=180/a.PI,a.radDeg=a.radiansToDegrees,a.degreesToRadians=a.PI/180,a.degRad=a.degreesToRadians;class o{apply(t,e,i){return t+(e-t)*this.applyInternal(i)}}class l extends o{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}class h extends l{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}class c{static arrayCopy(t,e,i,s,r){for(let n=e,a=s;n<e+r;n++,a++)i[a]=t[n]}static arrayFill(t,e,i,s){for(let r=e;r<i;r++)t[r]=s}static setArraySize(t,e,i=0){let s=t.length;if(s==e)return t;if(t.length=e,s<e)for(let r=s;r<e;r++)t[r]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:c.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}static newFloatArray(t){if(c.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(c.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return c.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return c.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}c.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;class u{static logBones(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}}}class d{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class f{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}class m{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}class g{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}class p{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}class x extends p{constructor(t){super(t),this.id=x.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,e,i,s,r,n){i=r+(i>>1)*n;let a=t.bone.skeleton,o=t.deform,l=this.vertices,h=this.bones;if(!h){o.length>0&&(l=o);let a=t.bone,h=a.worldX,c=a.worldY,u=a.a,d=a.b,f=a.c,m=a.d;for(let t=e,a=r;a<i;t+=2,a+=n){let e=l[t],i=l[t+1];s[a]=e*u+i*d+h,s[a+1]=e*f+i*m+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=h[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<i;t+=n){let i=0,r=0,n=h[c++];for(n+=c;c<n;c++,e+=3){let t=d[h[c]],s=l[e],n=l[e+1],a=l[e+2];i+=(s*t.a+n*t.b+t.worldX)*a,r+=(s*t.c+n*t.d+t.worldY)*a}s[t]=i,s[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<i;e+=n){let i=0,r=0,n=h[c++];for(n+=c;c<n;c++,a+=3,o+=2){let e=d[h[c]],s=l[a]+t[o],n=l[a+1]+t[o+1],u=l[a+2];i+=(s*e.a+n*e.b+e.worldX)*u,r+=(s*e.c+n*e.d+e.worldY)*u}s[e]=i,s[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),c.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=c.newFloatArray(this.vertices.length),c.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}x.nextID=0;class w{constructor(t){this.id=w.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){let t=new w(this.regions.length);return c.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let i=t.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let s=this.regions[i];e.region!=s&&(e.region=s,e.updateRegion())}getPath(t,e){let i=t,s=(this.start+e).toString();for(let t=this.digits-s.length;t>0;t--)i+="0";return i+=s,i}static nextID(){return w._nextID++}}var b;w._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(b||(b={}));const y=[b.hold,b.once,b.loop,b.pingpong,b.onceReverse,b.loopReverse,b.pingpongReverse];class v{constructor(t,e,i){if(this.timelines=[],this.timelineIds=new r,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,s,r,n,a,o){if(!t)throw new Error("skeleton cannot be null.");s&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let l=this.timelines;for(let s=0,h=l.length;s<h;s++)l[s].apply(t,e,i,r,n,a,o)}}var A,S;!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(A||(A={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(S||(S={}));const T=0,C=1,M=2,I=3,k=4,E=5,F=6,R=7,Y=8,X=9,B=10,L=11,P=12,D=13,V=14,O=15,U=16,N=17,W=18,z=19;class q{constructor(t,e){this.propertyIds=e,this.frames=c.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let s=1;s<i;s++)if(t[s]>e)return s-1;return i-1}static search(t,e,i){let s=t.length;for(let r=i;r<s;r+=i)if(t[r]>e)return r-i;return s-i}}class _ extends q{constructor(t,e,i){super(t,i),this.curves=c.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=c.newFloatArray(e);c.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,i,s,r,n,a,o,l,h,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let f=.03*(s-2*n+o),m=.03*(r-2*a+l),g=.006*(3*(n-o)-s+h),p=.006*(3*(a-l)-r+c),x=2*f+g,w=2*m+p,b=.3*(n-s)+f+.16666667*g,y=.3*(a-r)+m+.16666667*p,v=s+b,A=r+y;for(let t=d+18;d<t;d+=2)u[d]=v,u[d+1]=A,b+=x,y+=w,x+=g,w+=p,v+=b,A+=y}getBezierValue(t,e,i,s){let r=this.curves;if(r[s]>t){let n=this.frames[e],a=this.frames[e+i];return a+(t-n)/(r[s]-n)*(r[s+1]-a)}let n=s+18;for(s+=2;s<n;s+=2)if(r[s]>=t){let e=r[s-2],i=r[s-1];return i+(t-e)/(r[s]-e)*(r[s+1]-i)}e+=this.getFrameEntries();let a=r[n-2],o=r[n-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+i]-o)}}class j extends _{constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let s=2;s<=i;s+=2)if(e[s]>t){i=s-2;break}let s=this.curves[i>>1];switch(s){case 0:let s=e[i],r=e[i+1];return r+(t-s)/(e[i+2]-s)*(e[i+2+1]-r);case 1:return e[i+1]}return this.getBezierValue(t,i,1,s-2)}}class G extends _{constructor(t,e,i,s){super(t,e,[i,s])}getFrameEntries(){return 3}setFrame(t,e,i,s){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s}}class H extends j{constructor(t,e,i){super(t,e,T+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.rotation=o.data.rotation);case A.first:o.rotation+=(o.data.rotation-o.rotation)*r}return}let l=this.getCurveValue(i);switch(n){case A.setup:o.rotation=o.data.rotation+l*r;break;case A.first:case A.replace:l+=o.data.rotation-o.rotation;case A.add:o.rotation+=l*r}}}class Z extends G{constructor(t,e,i){super(t,e,C+"|"+i,M+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(n){case A.setup:return o.x=o.data.x,void(o.y=o.data.y);case A.first:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let h=0,c=0,u=q.search(l,i,3),d=this.curves[u/3];switch(d){case 0:let t=l[u];h=l[u+1],c=l[u+2];let e=(i-t)/(l[u+3]-t);h+=(l[u+3+1]-h)*e,c+=(l[u+3+2]-c)*e;break;case 1:h=l[u+1],c=l[u+2];break;default:h=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(n){case A.setup:o.x=o.data.x+h*r,o.y=o.data.y+c*r;break;case A.first:case A.replace:o.x+=(o.data.x+h-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case A.add:o.x+=h*r,o.y+=c*r}}}class K extends j{constructor(t,e,i){super(t,e,C+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.x=o.data.x);case A.first:o.x+=(o.data.x-o.x)*r}return}let l=this.getCurveValue(i);switch(n){case A.setup:o.x=o.data.x+l*r;break;case A.first:case A.replace:o.x+=(o.data.x+l-o.x)*r;break;case A.add:o.x+=l*r}}}class J extends j{constructor(t,e,i){super(t,e,M+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.y=o.data.y);case A.first:o.y+=(o.data.y-o.y)*r}return}let l=this.getCurveValue(i);switch(n){case A.setup:o.y=o.data.y+l*r;break;case A.first:case A.replace:o.y+=(o.data.y+l-o.y)*r;break;case A.add:o.y+=l*r}}}class Q extends G{constructor(t,e,i){super(t,e,I+"|"+i,k+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,o){let l=t.bones[this.boneIndex];if(!l.active)return;let h,c,u=this.frames;if(i<u[0]){switch(n){case A.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case A.first:l.scaleX+=(l.data.scaleX-l.scaleX)*r,l.scaleY+=(l.data.scaleY-l.scaleY)*r}return}let d=q.search(u,i,3),f=this.curves[d/3];switch(f){case 0:let t=u[d];h=u[d+1],c=u[d+2];let e=(i-t)/(u[d+3]-t);h+=(u[d+3+1]-h)*e,c+=(u[d+3+2]-c)*e;break;case 1:h=u[d+1],c=u[d+2];break;default:h=this.getBezierValue(i,d,1,f-2),c=this.getBezierValue(i,d,2,f+18-2)}if(h*=l.data.scaleX,c*=l.data.scaleY,1==r)n==A.add?(l.scaleX+=h-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=h,l.scaleY=c);else{let t=0,e=0;if(o==S.mixOut)switch(n){case A.setup:t=l.data.scaleX,e=l.data.scaleY,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*r,l.scaleY=e+(Math.abs(c)*a.signum(e)-e)*r;break;case A.first:case A.replace:t=l.scaleX,e=l.scaleY,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*r,l.scaleY=e+(Math.abs(c)*a.signum(e)-e)*r;break;case A.add:l.scaleX+=(h-l.data.scaleX)*r,l.scaleY+=(c-l.data.scaleY)*r}else switch(n){case A.setup:t=Math.abs(l.data.scaleX)*a.signum(h),e=Math.abs(l.data.scaleY)*a.signum(c),l.scaleX=t+(h-t)*r,l.scaleY=e+(c-e)*r;break;case A.first:case A.replace:t=Math.abs(l.scaleX)*a.signum(h),e=Math.abs(l.scaleY)*a.signum(c),l.scaleX=t+(h-t)*r,l.scaleY=e+(c-e)*r;break;case A.add:l.scaleX+=(h-l.data.scaleX)*r,l.scaleY+=(c-l.data.scaleY)*r}}}}class $ extends j{constructor(t,e,i){super(t,e,I+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,o){let l=t.bones[this.boneIndex];if(!l.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(l.scaleX=l.data.scaleX);case A.first:l.scaleX+=(l.data.scaleX-l.scaleX)*r}return}let h=this.getCurveValue(i)*l.data.scaleX;if(1==r)n==A.add?l.scaleX+=h-l.data.scaleX:l.scaleX=h;else{let t=0;if(o==S.mixOut)switch(n){case A.setup:t=l.data.scaleX,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*r;break;case A.first:case A.replace:t=l.scaleX,l.scaleX=t+(Math.abs(h)*a.signum(t)-t)*r;break;case A.add:l.scaleX+=(h-l.data.scaleX)*r}else switch(n){case A.setup:t=Math.abs(l.data.scaleX)*a.signum(h),l.scaleX=t+(h-t)*r;break;case A.first:case A.replace:t=Math.abs(l.scaleX)*a.signum(h),l.scaleX=t+(h-t)*r;break;case A.add:l.scaleX+=(h-l.data.scaleX)*r}}}}class tt extends j{constructor(t,e,i){super(t,e,k+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,o){let l=t.bones[this.boneIndex];if(!l.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(l.scaleY=l.data.scaleY);case A.first:l.scaleY+=(l.data.scaleY-l.scaleY)*r}return}let h=this.getCurveValue(i)*l.data.scaleY;if(1==r)n==A.add?l.scaleY+=h-l.data.scaleY:l.scaleY=h;else{let t=0;if(o==S.mixOut)switch(n){case A.setup:t=l.data.scaleY,l.scaleY=t+(Math.abs(h)*a.signum(t)-t)*r;break;case A.first:case A.replace:t=l.scaleY,l.scaleY=t+(Math.abs(h)*a.signum(t)-t)*r;break;case A.add:l.scaleY+=(h-l.data.scaleY)*r}else switch(n){case A.setup:t=Math.abs(l.data.scaleY)*a.signum(h),l.scaleY=t+(h-t)*r;break;case A.first:case A.replace:t=Math.abs(l.scaleY)*a.signum(h),l.scaleY=t+(h-t)*r;break;case A.add:l.scaleY+=(h-l.data.scaleY)*r}}}}class et extends G{constructor(t,e,i){super(t,e,E+"|"+i,F+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(n){case A.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case A.first:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=0,c=0,u=q.search(l,i,3),d=this.curves[u/3];switch(d){case 0:let t=l[u];h=l[u+1],c=l[u+2];let e=(i-t)/(l[u+3]-t);h+=(l[u+3+1]-h)*e,c+=(l[u+3+2]-c)*e;break;case 1:h=l[u+1],c=l[u+2];break;default:h=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}switch(n){case A.setup:o.shearX=o.data.shearX+h*r,o.shearY=o.data.shearY+c*r;break;case A.first:case A.replace:o.shearX+=(o.data.shearX+h-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case A.add:o.shearX+=h*r,o.shearY+=c*r}}}class it extends j{constructor(t,e,i){super(t,e,E+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.shearX=o.data.shearX);case A.first:o.shearX+=(o.data.shearX-o.shearX)*r}return}let l=this.getCurveValue(i);switch(n){case A.setup:o.shearX=o.data.shearX+l*r;break;case A.first:case A.replace:o.shearX+=(o.data.shearX+l-o.shearX)*r;break;case A.add:o.shearX+=l*r}}}class st extends j{constructor(t,e,i){super(t,e,F+"|"+i),this.boneIndex=0,this.boneIndex=i}apply(t,e,i,s,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.shearY=o.data.shearY);case A.first:o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=this.getCurveValue(i);switch(n){case A.setup:o.shearY=o.data.shearY+l*r;break;case A.first:case A.replace:o.shearY+=(o.data.shearY+l-o.shearY)*r;break;case A.add:o.shearY+=l*r}}}class rt extends _{constructor(t,e,i){super(t,e,[R+"|"+i,Y+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,e,i,s,r,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let t=o.data.color;switch(n){case A.setup:return void h.setFromColor(t);case A.first:h.add((t.r-h.r)*r,(t.g-h.g)*r,(t.b-h.b)*r,(t.a-h.a)*r)}return}let c=0,u=0,d=0,f=0,m=q.search(l,i,5),g=this.curves[m/5];switch(g){case 0:let t=l[m];c=l[m+1],u=l[m+2],d=l[m+3],f=l[m+4];let e=(i-t)/(l[m+5]-t);c+=(l[m+5+1]-c)*e,u+=(l[m+5+2]-u)*e,d+=(l[m+5+3]-d)*e,f+=(l[m+5+4]-f)*e;break;case 1:c=l[m+1],u=l[m+2],d=l[m+3],f=l[m+4];break;default:c=this.getBezierValue(i,m,1,g-2),u=this.getBezierValue(i,m,2,g+18-2),d=this.getBezierValue(i,m,3,g+36-2),f=this.getBezierValue(i,m,4,g+54-2)}1==r?h.set(c,u,d,f):(n==A.setup&&h.setFromColor(o.data.color),h.add((c-h.r)*r,(u-h.g)*r,(d-h.b)*r,(f-h.a)*r))}}class nt extends _{constructor(t,e,i){super(t,e,[R+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,r){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let t=o.data.color;switch(n){case A.setup:return h.r=t.r,h.g=t.g,void(h.b=t.b);case A.first:h.r+=(t.r-h.r)*r,h.g+=(t.g-h.g)*r,h.b+=(t.b-h.b)*r}return}let c=0,u=0,d=0,f=q.search(l,i,4),m=this.curves[f>>2];switch(m){case 0:let t=l[f];c=l[f+1],u=l[f+2],d=l[f+3];let e=(i-t)/(l[f+4]-t);c+=(l[f+4+1]-c)*e,u+=(l[f+4+2]-u)*e,d+=(l[f+4+3]-d)*e;break;case 1:c=l[f+1],u=l[f+2],d=l[f+3];break;default:c=this.getBezierValue(i,f,1,m-2),u=this.getBezierValue(i,f,2,m+18-2),d=this.getBezierValue(i,f,3,m+36-2)}if(1==r)h.r=c,h.g=u,h.b=d;else{if(n==A.setup){let t=o.data.color;h.r=t.r,h.g=t.g,h.b=t.b}h.r+=(c-h.r)*r,h.g+=(u-h.g)*r,h.b+=(d-h.b)*r}}}class at extends j{constructor(t,e,i){super(t,e,Y+"|"+i),this.slotIndex=0,this.slotIndex=i}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.color;if(i<this.frames[0]){let t=o.data.color;switch(n){case A.setup:return void(l.a=t.a);case A.first:l.a+=(t.a-l.a)*r}return}let h=this.getCurveValue(i);1==r?l.a=h:(n==A.setup&&(l.a=o.data.color.a),l.a+=(h-l.a)*r)}}class ot extends _{constructor(t,e,i){super(t,e,[R+"|"+i,Y+"|"+i,X+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,e,i,s,r,n,a,o,l){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=l}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(i<l[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case A.setup:return h.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case A.first:h.add((t.r-h.r)*r,(t.g-h.g)*r,(t.b-h.b)*r,(t.a-h.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,m=0,g=0,p=0,x=0,w=q.search(l,i,8),b=this.curves[w>>3];switch(b){case 0:let t=l[w];u=l[w+1],d=l[w+2],f=l[w+3],m=l[w+4],g=l[w+5],p=l[w+6],x=l[w+7];let e=(i-t)/(l[w+8]-t);u+=(l[w+8+1]-u)*e,d+=(l[w+8+2]-d)*e,f+=(l[w+8+3]-f)*e,m+=(l[w+8+4]-m)*e,g+=(l[w+8+5]-g)*e,p+=(l[w+8+6]-p)*e,x+=(l[w+8+7]-x)*e;break;case 1:u=l[w+1],d=l[w+2],f=l[w+3],m=l[w+4],g=l[w+5],p=l[w+6],x=l[w+7];break;default:u=this.getBezierValue(i,w,1,b-2),d=this.getBezierValue(i,w,2,b+18-2),f=this.getBezierValue(i,w,3,b+36-2),m=this.getBezierValue(i,w,4,b+54-2),g=this.getBezierValue(i,w,5,b+72-2),p=this.getBezierValue(i,w,6,b+90-2),x=this.getBezierValue(i,w,7,b+108-2)}if(1==r)h.set(u,d,f,m),c.r=g,c.g=p,c.b=x;else{if(n==A.setup){h.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}h.add((u-h.r)*r,(d-h.g)*r,(f-h.b)*r,(m-h.a)*r),c.r+=(g-c.r)*r,c.g+=(p-c.g)*r,c.b+=(x-c.b)*r}}}class lt extends _{constructor(t,e,i){super(t,e,[R+"|"+i,X+"|"+i]),this.slotIndex=0,this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,r,n,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(i<l[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case A.setup:return h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case A.first:h.r+=(t.r-h.r)*r,h.g+=(t.g-h.g)*r,h.b+=(t.b-h.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,m=0,g=0,p=0,x=q.search(l,i,7),w=this.curves[x/7];switch(w){case 0:let t=l[x];u=l[x+1],d=l[x+2],f=l[x+3],m=l[x+4],g=l[x+5],p=l[x+6];let e=(i-t)/(l[x+7]-t);u+=(l[x+7+1]-u)*e,d+=(l[x+7+2]-d)*e,f+=(l[x+7+3]-f)*e,m+=(l[x+7+4]-m)*e,g+=(l[x+7+5]-g)*e,p+=(l[x+7+6]-p)*e;break;case 1:u=l[x+1],d=l[x+2],f=l[x+3],m=l[x+4],g=l[x+5],p=l[x+6];break;default:u=this.getBezierValue(i,x,1,w-2),d=this.getBezierValue(i,x,2,w+18-2),f=this.getBezierValue(i,x,3,w+36-2),m=this.getBezierValue(i,x,4,w+54-2),g=this.getBezierValue(i,x,5,w+72-2),p=this.getBezierValue(i,x,6,w+90-2)}if(1==r)h.r=u,h.g=d,h.b=f,c.r=m,c.g=g,c.b=p;else{if(n==A.setup){let t=o.data.color,e=o.data.darkColor;h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}h.r+=(u-h.r)*r,h.g+=(d-h.g)*r,h.b+=(f-h.b)*r,c.r+=(m-c.r)*r,c.g+=(g-c.g)*r,c.b+=(p-c.b)*r}}}class ht extends q{constructor(t,e){super(t,[B+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];o.bone.active&&(a!=S.mixOut?i<this.frames[0]?n!=A.setup&&n!=A.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[q.search1(this.frames,i)]):n==A.setup&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class ct extends _{constructor(t,e,i,s){super(t,e,[L+"|"+i+"|"+s.id]),this.slotIndex=0,this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.vertices[t]=i}setBezier(t,e,i,s,r,n,a,o,l,h,c){let u=this.curves,d=this.getFrameCount()+18*t;0==i&&(u[e]=2+d);let f=.03*(s-2*n+o),m=.03*l-.06*a,g=.006*(3*(n-o)-s+h),p=.018*(a-l+.33333333),x=2*f+g,w=2*m+p,b=.3*(n-s)+f+.16666667*g,y=.3*a+m+.16666667*p,v=s+b,A=y;for(let t=d+18;d<t;d+=2)u[d]=v,u[d+1]=A,b+=x,y+=w,x+=g,w+=p,v+=b,A+=y}getCurvePercent(t,e){let i=this.curves,s=i[e];switch(s){case 0:let i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(s-=2,i[s]>t){let r=this.frames[e];return i[s+1]*(t-r)/(i[s]-r)}let r=s+18;for(s+=2;s<r;s+=2)if(i[s]>=t){let e=i[s-2],r=i[s-1];return r+(t-e)/(i[s]-e)*(i[s+1]-r)}let n=i[r-2],a=i[r-1];return a+(1-a)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.getAttachment();if(!l)return;if(!(l instanceof x)||l.timelineAttachment!=this.attachment)return;let h=o.deform;0==h.length&&(n=A.setup);let u=this.vertices,d=u[0].length,f=this.frames;if(i<f[0]){switch(n){case A.setup:return void(h.length=0);case A.first:if(1==r)return void(h.length=0);h.length=d;let t=l;if(t.bones){r=1-r;for(m=0;m<d;m++)h[m]*=r}else{let e=t.vertices;for(var m=0;m<d;m++)h[m]+=(e[m]-h[m])*r}}return}if(h.length=d,i>=f[f.length-1]){let t=u[f.length-1];if(1==r)if(n==A.add){let e=l;if(e.bones)for(let e=0;e<d;e++)h[e]+=t[e];else{let i=e.vertices;for(let e=0;e<d;e++)h[e]+=t[e]-i[e]}}else c.arrayCopy(t,0,h,0,d);else switch(n){case A.setup:{let e=l;if(e.bones)for(let e=0;e<d;e++)h[e]=t[e]*r;else{let i=e.vertices;for(let e=0;e<d;e++){let s=i[e];h[e]=s+(t[e]-s)*r}}break}case A.first:case A.replace:for(let e=0;e<d;e++)h[e]+=(t[e]-h[e])*r;break;case A.add:let e=l;if(e.bones)for(let e=0;e<d;e++)h[e]+=t[e]*r;else{let i=e.vertices;for(let e=0;e<d;e++)h[e]+=(t[e]-i[e])*r}}return}let g=q.search1(f,i),p=this.getCurvePercent(i,g),w=u[g],b=u[g+1];if(1==r)if(n==A.add){let t=l;if(t.bones)for(let t=0;t<d;t++){let e=w[t];h[t]+=e+(b[t]-e)*p}else{let e=t.vertices;for(let t=0;t<d;t++){let i=w[t];h[t]+=i+(b[t]-i)*p-e[t]}}}else for(let t=0;t<d;t++){let e=w[t];h[t]=e+(b[t]-e)*p}else switch(n){case A.setup:{let t=l;if(t.bones)for(let t=0;t<d;t++){let e=w[t];h[t]=(e+(b[t]-e)*p)*r}else{let e=t.vertices;for(let t=0;t<d;t++){let i=w[t],s=e[t];h[t]=s+(i+(b[t]-i)*p-s)*r}}break}case A.first:case A.replace:for(let t=0;t<d;t++){let e=w[t];h[t]+=(e+(b[t]-e)*p-h[t])*r}break;case A.add:let t=l;if(t.bones)for(let t=0;t<d;t++){let e=w[t];h[t]+=(e+(b[t]-e)*p)*r}else{let e=t.vertices;for(let t=0;t<d;t++){let i=w[t];h[t]+=(i+(b[t]-i)*p-e[t])*r}}}}}class ut extends q{constructor(t){super(t,ut.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,s,r,n,a){if(!s)return;let o=this.frames,l=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,s,r,n,a),e=-1;else if(e>=o[l-1])return;if(i<o[0])return;let h=0;if(e<o[0])h=0;else{h=q.search1(o,e)+1;let t=o[h];for(;h>0&&o[h-1]==t;)h--}for(;h<l&&i>=o[h];h++)s.push(this.events[h])}}ut.propertyIds=[""+P];class dt extends q{constructor(t){super(t,dt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,s,r,n,a){if(a==S.mixOut)return void(n==A.setup&&c.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(i<this.frames[0])return void(n!=A.setup&&n!=A.first||c.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=q.search1(this.frames,i),l=this.drawOrders[o];if(l){let e=t.drawOrder,i=t.slots;for(let t=0,s=l.length;t<s;t++)e[t]=i[l[t]]}else c.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}dt.propertyIds=[""+D];class ft extends _{constructor(t,e,i){super(t,e,[V+"|"+i]),this.ikConstraintIndex=0,this.ikConstraintIndex=i}getFrameEntries(){return 6}setFrame(t,e,i,s,r,n,a){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=r,this.frames[t+4]=n?1:0,this.frames[t+5]=a?1:0}apply(t,e,i,s,r,n,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(n){case A.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case A.first:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let h=0,c=0,u=q.search(l,i,6),d=this.curves[u/6];switch(d){case 0:let t=l[u];h=l[u+1],c=l[u+2];let e=(i-t)/(l[u+6]-t);h+=(l[u+6+1]-h)*e,c+=(l[u+6+2]-c)*e;break;case 1:h=l[u+1],c=l[u+2];break;default:h=this.getBezierValue(i,u,1,d-2),c=this.getBezierValue(i,u,2,d+18-2)}n==A.setup?(o.mix=o.data.mix+(h-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,a==S.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=l[u+3],o.compress=0!=l[u+4],o.stretch=0!=l[u+5])):(o.mix+=(h-o.mix)*r,o.softness+=(c-o.softness)*r,a==S.mixIn&&(o.bendDirection=l[u+3],o.compress=0!=l[u+4],o.stretch=0!=l[u+5]))}}class mt extends _{constructor(t,e,i){super(t,e,[O+"|"+i]),this.transformConstraintIndex=0,this.transformConstraintIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,s,r,n,a,o){let l=this.frames;l[t*=7]=e,l[t+1]=i,l[t+2]=s,l[t+3]=r,l[t+4]=n,l[t+5]=a,l[t+6]=o}apply(t,e,i,s,r,n,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let l,h,c,u,d,f,m=this.frames;if(i<m[0]){let t=o.data;switch(n){case A.setup:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case A.first:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let g=q.search(m,i,7),p=this.curves[g/7];switch(p){case 0:let t=m[g];l=m[g+1],h=m[g+2],c=m[g+3],u=m[g+4],d=m[g+5],f=m[g+6];let e=(i-t)/(m[g+7]-t);l+=(m[g+7+1]-l)*e,h+=(m[g+7+2]-h)*e,c+=(m[g+7+3]-c)*e,u+=(m[g+7+4]-u)*e,d+=(m[g+7+5]-d)*e,f+=(m[g+7+6]-f)*e;break;case 1:l=m[g+1],h=m[g+2],c=m[g+3],u=m[g+4],d=m[g+5],f=m[g+6];break;default:l=this.getBezierValue(i,g,1,p-2),h=this.getBezierValue(i,g,2,p+18-2),c=this.getBezierValue(i,g,3,p+36-2),u=this.getBezierValue(i,g,4,p+54-2),d=this.getBezierValue(i,g,5,p+72-2),f=this.getBezierValue(i,g,6,p+90-2)}if(n==A.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*r,o.mixX=t.mixX+(h-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(f-t.mixShearY)*r}else o.mixRotate+=(l-o.mixRotate)*r,o.mixX+=(h-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(u-o.mixScaleX)*r,o.mixScaleY+=(d-o.mixScaleY)*r,o.mixShearY+=(f-o.mixShearY)*r}}class gt extends j{constructor(t,e,i){super(t,e,U+"|"+i),this.pathConstraintIndex=0,this.pathConstraintIndex=i}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.position=o.data.position);case A.first:o.position+=(o.data.position-o.position)*r}return}let l=this.getCurveValue(i);n==A.setup?o.position=o.data.position+(l-o.data.position)*r:o.position+=(l-o.position)*r}}class pt extends j{constructor(t,e,i){super(t,e,N+"|"+i),this.pathConstraintIndex=0,this.pathConstraintIndex=i}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(i<this.frames[0]){switch(n){case A.setup:return void(o.spacing=o.data.spacing);case A.first:o.spacing+=(o.data.spacing-o.spacing)*r}return}let l=this.getCurveValue(i);n==A.setup?o.spacing=o.data.spacing+(l-o.data.spacing)*r:o.spacing+=(l-o.spacing)*r}}class xt extends _{constructor(t,e,i){super(t,e,[W+"|"+i]),this.pathConstraintIndex=0,this.pathConstraintIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,s,r){let n=this.frames;n[t<<=2]=e,n[t+1]=i,n[t+2]=s,n[t+3]=r}apply(t,e,i,s,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let l,h,c,u=this.frames;if(i<u[0]){switch(n){case A.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case A.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let d=q.search(u,i,4),f=this.curves[d>>2];switch(f){case 0:let t=u[d];l=u[d+1],h=u[d+2],c=u[d+3];let e=(i-t)/(u[d+4]-t);l+=(u[d+4+1]-l)*e,h+=(u[d+4+2]-h)*e,c+=(u[d+4+3]-c)*e;break;case 1:l=u[d+1],h=u[d+2],c=u[d+3];break;default:l=this.getBezierValue(i,d,1,f-2),h=this.getBezierValue(i,d,2,f+18-2),c=this.getBezierValue(i,d,3,f+36-2)}if(n==A.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*r,o.mixX=t.mixX+(h-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(l-o.mixRotate)*r,o.mixX+=(h-o.mixX)*r,o.mixY+=(c-o.mixY)*r}}class wt extends q{constructor(t,e,i){super(t,[z+"|"+e+"|"+i.sequence.id]),this.slotIndex=e,this.attachment=i}getFrameEntries(){return wt.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,i,s,r){let n=this.frames;n[t*=wt.ENTRIES]=e,n[t+wt.MODE]=i|s<<4,n[t+wt.DELAY]=r}apply(t,e,i,s,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.attachment,h=this.attachment;if(!(l==h||l instanceof x&&l.timelineAttachment==h))return;let c=this.frames;if(i<c[0])return void(n!=A.setup&&n!=A.first||(o.sequenceIndex=-1));let u=q.search(c,i,wt.ENTRIES),d=c[u],f=c[u+wt.MODE],m=c[u+wt.DELAY];if(!this.attachment.sequence)return;let g=f>>4,p=this.attachment.sequence.regions.length,w=y[15&f];if(w!=b.hold)switch(g+=(i-d)/m+1e-5|0,w){case b.once:g=Math.min(p-1,g);break;case b.loop:g%=p;break;case b.pingpong:{let t=(p<<1)-2;g=0==t?0:g%t,g>=p&&(g=t-g);break}case b.onceReverse:g=Math.max(p-1-g,0);break;case b.loopReverse:g=p-1-g%p;break;case b.pingpongReverse:{let t=(p<<1)-2;g=0==t?0:(g+p-1)%t,g>=p&&(g=t-g)}}o.sequenceIndex=g}}wt.ENTRIES=3,wt.MODE=1,wt.DELAY=2;class bt{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new vt(this),this.propertyIDs=new r,this.animationsChanged=!1,this.trackEntryPool=new d((()=>new yt)),this.data=t}static emptyAnimation(){return bt._emptyAnimation}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let r=t*s.timeScale;if(s.delay>0){if(s.delay-=r,s.delay>0)continue;r=-s.delay,s.delay=0}let n=s.next;if(n){let e=s.trackLast-n.delay;if(e>=0){for(n.delay=0,n.trackTime+=0==s.timeScale?0:(e/s.timeScale+t)*n.timeScale,s.trackTime+=r,this.setCurrent(i,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){e[i]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,t)){let t=s.mixingFrom;for(s.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}s.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,s=!1;for(let n=0,a=i.length;n<a;n++){let a=i[n];if(!a||a.delay>0)continue;s=!0;let o=0==n?A.first:a.mixBlend,l=a.alpha;a.mixingFrom?l*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(l=0);let h=a.animationLast,u=a.getAnimationTime(),d=u,f=e;a.reverse&&(d=a.animation.duration-d,f=null);let m=a.animation.timelines,g=m.length;if(0==n&&1==l||o==A.add)for(let e=0;e<g;e++){c.webkit602BugfixHelper(l,o);var r=m[e];r instanceof ht?this.applyAttachmentTimeline(r,t,d,o,!0):r.apply(t,h,d,f,l,o,S.mixIn)}else{let e=a.timelineMode,i=a.shortestRotation,s=!i&&a.timelinesRotation.length!=g<<1;s&&(a.timelinesRotation.length=g<<1);for(let r=0;r<g;r++){let n=m[r],u=e[r]==Tt?o:A.setup;!i&&n instanceof H?this.applyRotateTimeline(n,t,d,l,u,a.timelinesRotation,r<<1,s):n instanceof ht?this.applyAttachmentTimeline(n,t,d,o,!0):(c.webkit602BugfixHelper(l,o),n.apply(t,h,d,f,l,u,S.mixIn))}}this.queueEvents(a,u),e.length=0,a.nextAnimationLast=u,a.nextTrackLast=a.trackTime}for(var n=this.unkeyedState+Et,a=t.slots,o=0,l=t.slots.length;o<l;o++){var h=a[o];if(h.attachmentState==n){var u=h.data.attachmentName;h.setAttachment(u?t.getAttachment(h.data.index,u):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(t,e,i){let s=t.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,e,i);let r=0;0==t.mixDuration?(r=1,i==A.first&&(i=A.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),i!=A.first&&(i=s.mixBlend));let n=r<s.attachmentThreshold,a=r<s.drawOrderThreshold,o=s.animation.timelines,l=o.length,h=s.alpha*t.interruptAlpha,u=h*(1-r),d=s.animationLast,f=s.getAnimationTime(),m=f,g=null;if(s.reverse?m=s.animation.duration-m:r<s.eventThreshold&&(g=this.events),i==A.add)for(let t=0;t<l;t++)o[t].apply(e,d,m,g,u,i,S.mixOut);else{let t=s.timelineMode,r=s.timelineHoldMix,f=s.shortestRotation,p=!f&&s.timelinesRotation.length!=l<<1;p&&(s.timelinesRotation.length=l<<1),s.totalAlpha=0;for(let x=0;x<l;x++){let l,w=o[x],b=S.mixOut,y=0;switch(t[x]){case Tt:if(!a&&w instanceof dt)continue;l=i,y=u;break;case Ct:l=A.setup,y=u;break;case Mt:l=i,y=h;break;case It:l=A.setup,y=h;break;default:l=A.setup;let t=r[x];y=h*Math.max(0,1-t.mixTime/t.mixDuration)}s.totalAlpha+=y,!f&&w instanceof H?this.applyRotateTimeline(w,e,m,y,l,s.timelinesRotation,x<<1,p):w instanceof ht?this.applyAttachmentTimeline(w,e,m,l,n):(c.webkit602BugfixHelper(y,i),a&&w instanceof dt&&l==A.setup&&(b=S.mixIn),w.apply(e,d,m,g,y,l,b))}}return t.mixDuration>0&&this.queueEvents(s,f),this.events.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime,r}applyAttachmentTimeline(t,e,i,s,r){var n=e.slots[t.slotIndex];n.bone.active&&(i<t.frames[0]?s!=A.setup&&s!=A.first||this.setAttachment(e,n,n.data.attachmentName,r):this.setAttachment(e,n,t.attachmentNames[q.search1(t.frames,i)],r),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+Et))}setAttachment(t,e,i,s){e.setAttachment(i?t.getAttachment(e.data.index,i):null),s&&(e.attachmentState=this.unkeyedState+Ft)}applyRotateTimeline(t,e,i,s,r,n,o,l){if(l&&(n[o]=0),1==s)return void t.apply(e,0,i,null,1,r,S.mixIn);let h=e.bones[t.boneIndex];if(!h.active)return;let c=0,u=0;if(i<t.frames[0])switch(r){case A.setup:h.rotation=h.data.rotation;default:return;case A.first:c=h.rotation,u=h.data.rotation}else c=r==A.setup?h.data.rotation:h.rotation,u=h.data.rotation+t.getCurveValue(i);let d=0,f=u-c;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)d=n[o];else{let t=0,e=0;l?(t=0,e=f):(t=n[o],e=n[o+1]);let i=f>0,s=t>=0;a.signum(e)!=a.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*a.signum(t)),s=i),d=f+t-t%360,s!=i&&(d+=360*a.signum(t)),n[o]=d}n[o+1]=f,h.rotation=c+d*s}queueEvents(t,e){let i=t.animationStart,s=t.animationEnd,r=s-i,n=t.trackLast%r,a=this.events,o=0,l=a.length;for(;o<l;o++){let e=a[o];if(e.time<n)break;e.time>s||this.queue.event(t,e)}let h=!1;for(h=t.loop?0==r||n>t.trackTime%r:e>=s&&t.animationLast<s,h&&this.queue.complete(t);o<l;o++){let e=a[o];e.time<i||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let t=i.mixingFrom;if(!t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let s=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,s&&(i&&this.queue.interrupt(s),e.mixingFrom=s,s.mixingTo=e,e.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(e.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,s,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let s=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,s=!1):this.clearNext(r));let n=this.trackEntry(t,e,i,r);return this.setCurrent(t,n,s),this.queue.drain(),n}addAnimation(t,e,i=!1,s=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,s)}addAnimationWith(t,e,i=!1,s=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let n=this.trackEntry(t,e,i,r);return r?(r.next=n,n.previous=r,s<=0&&(s+=r.getTrackComplete()-n.mixDuration)):(this.setCurrent(t,n,!0),this.queue.drain()),n.delay=s,n}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,bt.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let s=this.addAnimationWith(t,bt.emptyAnimation(),!1,i);return i<=0&&(s.delay+=s.mixDuration-e),s.mixDuration=e,s.trackEnd=e,s}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(c.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,s){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=s?this.data.getMix(s.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=A.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&i.mixBlend==A.add||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,s=t.animation.timelines.length,r=t.timelineMode;r.length=s;let n=t.timelineHoldMix;n.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<s;t++)r[t]=a.addAll(i[t].getPropertyIds())?It:Mt;else t:for(let o=0;o<s;o++){let s=i[o],l=s.getPropertyIds();if(a.addAll(l))if(!e||s instanceof ht||s instanceof dt||s instanceof ut||!e.animation.hasTimeline(l))r[o]=Ct;else{for(let i=e.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(l)){if(t.mixDuration>0){r[o]=kt,n[o]=i;continue t}break}r[o]=It}else r[o]=Tt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}}bt._emptyAnimation=new v("<empty>",[],0);class yt{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=A.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}class vt{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(At.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(At.interrupt),this.objects.push(t)}end(t){this.objects.push(At.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(At.dispose),this.objects.push(t)}complete(t){this.objects.push(At.complete),this.objects.push(t)}event(t,e){this.objects.push(At.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];switch(s){case At.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let i=e[t];i.start&&i.start(r)}break;case At.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let i=e[t];i.interrupt&&i.interrupt(r)}break;case At.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let i=e[t];i.end&&i.end(r)}case At.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let i=e[t];i.dispose&&i.dispose(r)}this.animState.trackEntryPool.free(r);break;case At.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let i=e[t];i.complete&&i.complete(r)}break;case At.event:let s=t[2+i++];r.listener&&r.listener.event&&r.listener.event(r,s);for(let t=0;t<e.length;t++){let i=e[t];i.event&&i.event(r,s)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var At;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(At||(At={}));class St{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const Tt=0,Ct=1,Mt=2,It=3,kt=4,Et=1,Ft=2;class Rt{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(s,r,i)}setMixWith(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let s=t.name+"."+e.name;this.animationToMixTime[s]=i}getMix(t,e){let i=t.name+"."+e.name,s=this.animationToMixTime[i];return void 0===s?this.defaultMix:s}}class Yt extends x{constructor(t){super(t),this.color=new n(1,1,1,1)}copy(){let t=new Yt(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Xt extends x{constructor(t){super(t),this.endSlot=null,this.color=new n(.2275,.2275,.8078,1)}copy(){let t=new Xt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class Bt{constructor(t){this._image=t}getImage(){return this._image}}var Lt,Pt,Dt,Vt,Ot,Ut,Nt,Wt;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Lt||(Lt={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(Pt||(Pt={}));class zt{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}}class qt extends Bt{setFilters(t,e){}setWraps(t,e){}dispose(){}}class _t{constructor(t){this.pages=new Array,this.regions=new Array;let e=new jt(t),i=new Array(4),s={size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},format:()=>{},filter:t=>{t.minFilter=c.enumValue(Lt,i[1]),t.magFilter=c.enumValue(Lt,i[2])},repeat:t=>{-1!=i[1].indexOf("x")&&(t.uWrap=Pt.Repeat),-1!=i[1].indexOf("y")&&(t.vWrap=Pt.Repeat)},pma:t=>{t.pma="true"==i[1]}};var r={xy:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2])},size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},bounds:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2]),t.width=parseInt(i[3]),t.height=parseInt(i[4])},offset:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2])},orig:t=>{t.originalWidth=parseInt(i[1]),t.originalHeight=parseInt(i[2])},offsets:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2]),t.originalWidth=parseInt(i[3]),t.originalHeight=parseInt(i[4])},rotate:t=>{let e=i[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(i[1])}};let n=e.readLine();for(;n&&0==n.trim().length;)n=e.readLine();for(;n&&0!=n.trim().length&&0!=e.readEntry(i,n);)n=e.readLine();let a=null,o=null,l=null;for(;null!==n;)if(0==n.trim().length)a=null,n=e.readLine();else if(a){let t=new Ht(a,n);for(;;){let s=e.readEntry(i,n=e.readLine());if(0==s)break;let a=r[i[0]];if(a)a(t);else{o||(o=[]),l||(l=[]),o.push(i[0]);let t=[];for(let e=0;e<s;e++)t.push(parseInt(i[e+1]));l.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&l&&l.length>0&&(t.names=o,t.values=l,o=null,l=null),t.u=t.x/a.width,t.v=t.y/a.height,90==t.degrees?(t.u2=(t.x+t.height)/a.width,t.v2=(t.y+t.width)/a.height):(t.u2=(t.x+t.width)/a.width,t.v2=(t.y+t.height)/a.height),this.regions.push(t)}else{for(a=new Gt(n.trim());0!=e.readEntry(i,n=e.readLine());){let t=s[i[0]];t&&t(a)}this.pages.push(a)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let i of this.pages)i.setTexture(t.get(e+i.name))}dispose(){var t;for(let e=0;e<this.pages.length;e++)null===(t=this.pages[e].texture)||void 0===t||t.dispose()}}class jt{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(let s=1,r=i+1;;s++){let i=e.indexOf(",",r);if(-1==i)return t[s]=e.substr(r).trim(),s;if(t[s]=e.substr(r,i-r).trim(),r=i+1,4==s)return 4}}}class Gt{constructor(t){this.minFilter=Lt.Nearest,this.magFilter=Lt.Nearest,this.uWrap=Pt.ClampToEdge,this.vWrap=Pt.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}}class Ht extends zt{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e}}class Zt extends x{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new n(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new n(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=c.newFloatArray(t.length));let e=this.uvs,i=this.uvs.length,s=this.region.u,r=this.region.v,n=0,a=0;if(this.region instanceof Ht){let o=this.region,l=o.page.texture.getImage(),h=l.width,c=l.height;switch(o.degrees){case 90:s-=(o.originalHeight-o.offsetY-o.height)/h,r-=(o.originalWidth-o.offsetX-o.width)/c,n=o.originalHeight/h,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+t[o+1]*n,e[o+1]=r+(1-t[o])*a;return;case 180:s-=(o.originalWidth-o.offsetX-o.width)/h,r-=o.offsetY/c,n=o.originalWidth/h,a=o.originalHeight/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o])*n,e[o+1]=r+(1-t[o+1])*a;return;case 270:s-=o.offsetY/h,r-=o.offsetX/c,n=o.originalHeight/h,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=s+(1-t[o+1])*n,e[o+1]=r+t[o]*a;return}s-=o.offsetX/h,r-=(o.originalHeight-o.offsetY-o.height)/c,n=o.originalWidth/h,a=o.originalHeight/c}else this.region?(n=this.region.u2-s,a=this.region.v2-r):(s=r=0,n=a=1);for(let o=0;o<i;o+=2)e[o]=s+t[o]*n,e[o+1]=r+t[o+1]*a}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new Zt(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),c.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),c.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),c.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),c.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,i,s,r,n){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,i,s,r,n)}newLinkedMesh(){let t=new Zt(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}class Kt extends x{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new n(1,1,1,1)}copy(){let t=new Kt(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),c.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Jt extends x{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new n(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=a.cosDeg(this.rotation),i=a.sinDeg(this.rotation),s=e*t.a+i*t.b,r=e*t.c+i*t.d;return Math.atan2(r,s)*a.radDeg}copy(){let t=new Jt(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class Qt extends p{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new n(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=c.newFloatArray(8),this.uvs=c.newFloatArray(8),this.tempColor=new n(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*e,r=-this.height/2*this.scaleY+this.region.offsetY*i,n=s+this.region.width*e,a=r+this.region.height*i,o=this.rotation*Math.PI/180,l=Math.cos(o),h=Math.sin(o),c=this.x,u=this.y,d=s*l+c,f=s*h,m=r*l+u,g=r*h,p=n*l+c,x=n*h,w=a*l+u,b=a*h,y=this.offset;y[0]=d-g,y[1]=m+f,y[2]=d-b,y[3]=w+f,y[4]=p-b,y[5]=w+x,y[6]=p-g,y[7]=m+x;let v=this.uvs;90==t.degrees?(v[2]=t.u,v[3]=t.v2,v[4]=t.u,v[5]=t.v,v[6]=t.u2,v[7]=t.v,v[0]=t.u2,v[1]=t.v2):(v[0]=t.u,v[1]=t.v2,v[2]=t.u,v[3]=t.v,v[4]=t.u2,v[5]=t.v,v[6]=t.u2,v[7]=t.v2)}computeWorldVertices(t,e,i,s){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,n=this.offset,a=r.worldX,o=r.worldY,l=r.a,h=r.b,c=r.c,u=r.d,d=0,f=0;d=n[0],f=n[1],e[i]=d*l+f*h+a,e[i+1]=d*c+f*u+o,i+=s,d=n[2],f=n[3],e[i]=d*l+f*h+a,e[i+1]=d*c+f*u+o,i+=s,d=n[4],f=n[5],e[i]=d*l+f*h+a,e[i+1]=d*c+f*u+o,i+=s,d=n[6],f=n[7],e[i]=d*l+f*h+a,e[i+1]=d*c+f*u+o}copy(){let t=new Qt(this.name,this.path);return t.region=this.region,t.rendererObject=this.rendererObject,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,c.arrayCopy(this.uvs,0,t.uvs,0,8),c.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}Qt.X1=0,Qt.Y1=1,Qt.C1R=2,Qt.C1G=3,Qt.C1B=4,Qt.C1A=5,Qt.U1=6,Qt.V1=7,Qt.X2=8,Qt.Y2=9,Qt.C2R=10,Qt.C2G=11,Qt.C2B=12,Qt.C2A=13,Qt.U2=14,Qt.V2=15,Qt.X3=16,Qt.Y3=17,Qt.C3R=18,Qt.C3G=19,Qt.C3B=20,Qt.C3A=21,Qt.U3=22,Qt.V3=23,Qt.X4=24,Qt.Y4=25,Qt.C4R=26,Qt.C4G=27,Qt.C4B=28,Qt.C4A=29,Qt.U4=30,Qt.V4=31;class $t{constructor(t){this.atlas=t}loadSequence(t,e,i){let s=i.regions;for(let r=0,n=s.length;r<n;r++){let n=i.getPath(e,r),a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (sequence: "+t+")");s[r]=a,s[r].renderObject=s[r]}}newRegionAttachment(t,e,i,s){let r=new Qt(e,i);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");t.renderObject=t,r.region=t}return r}newMeshAttachment(t,e,i,s){let r=new Zt(e,i);if(null!=s)this.loadSequence(e,i,s);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");t.renderObject=t,r.region=t}return r}newBoundingBoxAttachment(t,e){return new Yt(e)}newPathAttachment(t,e){return new Kt(e)}newPointAttachment(t,e){return new Jt(e)}newClippingAttachment(t,e){return new Xt(e)}}class te{constructor(t,e,i){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Dt.Normal,this.skinRequired=!1,this.color=new n,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(Dt||(Dt={}));class ee{constructor(t,e,i){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,s,r,n,o){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=s,this.ascaleY=r,this.ashearX=n,this.ashearY=o;let l=this.parent;if(!l){let l=this.skeleton,h=i+90+o,c=l.scaleX,u=l.scaleY;return this.a=a.cosDeg(i+n)*s*c,this.b=a.cosDeg(h)*r*c,this.c=a.sinDeg(i+n)*s*u,this.d=a.sinDeg(h)*r*u,this.worldX=t*c+l.x,void(this.worldY=e*u+l.y)}let h=l.a,c=l.b,u=l.c,d=l.d;switch(this.worldX=h*t+c*e+l.worldX,this.worldY=u*t+d*e+l.worldY,this.data.transformMode){case Dt.Normal:{let t=i+90+o,e=a.cosDeg(i+n)*s,l=a.cosDeg(t)*r,f=a.sinDeg(i+n)*s,m=a.sinDeg(t)*r;return this.a=h*e+c*f,this.b=h*l+c*m,this.c=u*e+d*f,void(this.d=u*l+d*m)}case Dt.OnlyTranslation:{let t=i+90+o;this.a=a.cosDeg(i+n)*s,this.b=a.cosDeg(t)*r,this.c=a.sinDeg(i+n)*s,this.d=a.sinDeg(t)*r;break}case Dt.NoRotationOrReflection:{let t=h*h+u*u,e=0;t>1e-4?(t=Math.abs(h*d-c*u)/t,h/=this.skeleton.scaleX,u/=this.skeleton.scaleY,c=u*t,d=h*t,e=Math.atan2(u,h)*a.radDeg):(h=0,u=0,e=90-Math.atan2(d,c)*a.radDeg);let l=i+n-e,f=i+o-e+90,m=a.cosDeg(l)*s,g=a.cosDeg(f)*r,p=a.sinDeg(l)*s,x=a.sinDeg(f)*r;this.a=h*m-c*p,this.b=h*g-c*x,this.c=u*m+d*p,this.d=u*g+d*x;break}case Dt.NoScale:case Dt.NoScaleOrReflection:{let t=a.cosDeg(i),e=a.sinDeg(i),l=(h*t+c*e)/this.skeleton.scaleX,f=(u*t+d*e)/this.skeleton.scaleY,m=Math.sqrt(l*l+f*f);m>1e-5&&(m=1/m),l*=m,f*=m,m=Math.sqrt(l*l+f*f),this.data.transformMode==Dt.NoScale&&h*d-c*u<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(m=-m);let g=Math.PI/2+Math.atan2(f,l),p=Math.cos(g)*m,x=Math.sin(g)*m,w=a.cosDeg(n)*s,b=a.cosDeg(90+o)*r,y=a.sinDeg(n)*s,v=a.sinDeg(90+o)*r;this.a=l*w+p*y,this.b=l*b+p*v,this.c=f*w+x*y,this.d=f*b+x*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*a.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*a.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*a.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*a.radDeg);let e=t.a,i=t.b,s=t.c,r=t.d,n=1/(e*r-i*s),o=this.worldX-t.worldX,l=this.worldY-t.worldY;this.ax=o*r*n-l*i*n,this.ay=l*e*n-o*s*n;let h=n*r,c=n*e,u=n*i,d=n*s,f=h*this.a-u*this.c,m=h*this.b-u*this.d,g=c*this.c-d*this.a,p=c*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+g*g),this.ascaleX>1e-4){let t=f*p-m*g;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*m+g*p,t)*a.radDeg,this.arotation=Math.atan2(g,f)*a.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,m)*a.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,s=t.y-this.worldY;return t.x=i*this.d*e-s*this.b*e,t.y=s*this.a*e-i*this.c*e,t}localToWorld(t){let e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}worldToLocalRotation(t){let e=a.sinDeg(t),i=a.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*a.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=a.sinDeg(t),i=a.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*a.radDeg}rotateWorld(t){let e=this.a,i=this.b,s=this.c,r=this.d,n=a.cosDeg(t),o=a.sinDeg(t);this.a=n*e-o*s,this.b=n*i-o*r,this.c=o*e+n*s,this.d=o*i+n*r}}class ie{constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}}class se{constructor(t,e="",i=new re){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=i}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,i){this.toLoad--,this.loaded++,this.assets[e]=i,t&&t(e,i)}error(t,e,i){this.toLoad--,this.loaded++,this.errors[e]=i,t&&t(e,i)}loadAll(){return new Promise(((t,e)=>{let i=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(i)};requestAnimationFrame(i)}))}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=(()=>{}),i=(()=>{})){t=this.start(t),this.downloader.downloadBinary(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load binary ${t}: status ${e}, ${s}`)}))}loadText(t,e=(()=>{}),i=(()=>{})){t=this.start(t),this.downloader.downloadText(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load text ${t}: status ${e}, ${s}`)}))}loadJson(t,e=(()=>{}),i=(()=>{})){t=this.start(t),this.downloader.downloadJson(t,(i=>{this.success(e,t,i)}),((e,s)=>{this.error(i,t,`Couldn't load JSON ${t}: status ${e}, ${s}`)}))}loadTexture(t,e=(()=>{}),i=(()=>{})){if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(i,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((i=>{i&&this.success(e,t,this.textureLoader(i))}));else{let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{this.success(e,t,this.textureLoader(s))},s.onerror=()=>{this.error(i,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),s.src=t}}loadTextureAtlas(t,e=(()=>{}),i=(()=>{}),s){let r=t.lastIndexOf("/"),n=r>=0?t.substring(0,r+1):"";t=this.start(t),this.downloader.downloadText(t,(r=>{try{let a=new _t(r),o=a.pages.length,l=!1;for(let r of a.pages)this.loadTexture(s?s[r.name]:n+r.name,((i,s)=>{l||(r.setTexture(s),0==--o&&this.success(e,t,a))}),((e,s)=>{l||this.error(i,t,`Couldn't load texture atlas ${t} page image: ${e}`),l=!0}))}catch(e){this.error(i,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,s)=>{this.error(i,t,`Couldn't load texture atlas ${t}: status ${e}, ${s}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let i=this.errors[t];throw Error("Asset not found: "+t+(i?"\n"+i:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}}class re{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+="base64,".length,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),i=e.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=e.charCodeAt(r);return s}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+="base64,".length,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.overrideMimeType("text/html"),s.open("GET",t,!0);let r=()=>{this.finish(t,s.status,s.responseText)};s.onload=r,s.onerror=r,s.send()}downloadJson(t,e,i){this.downloadText(t,(t=>{e(JSON.parse(t))}),i)}downloadBinary(t,e,i){if(this.start(t,e,i))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer";let r=()=>{this.finish(t,s.status,s.response)};s.onload=()=>{200==s.status||0==s.status?this.finish(t,200,new Uint8Array(s.response)):r()},s.onerror=r,s.send()}start(t,e,i){let s=this.callbacks[t];try{if(s)return!0;this.callbacks[t]=s=[]}finally{s.push(e,i)}}finish(t,e,i){let s=this.callbacks[t];delete this.callbacks[t];let r=200==e||0==e?[i]:[e,i];for(let t=r.length-1,e=s.length;t<e;t+=2)s[t].apply(null,r)}}class ne{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class ae{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}}class oe{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}`);this.bones.push(s)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=i}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,i,s,r,n,o){let l=t.parent;if(!l)throw new Error("IK bone must have parent.");let h=l.a,c=l.b,u=l.c,d=l.d,f=-t.ashearX-t.arotation,m=0,g=0;switch(t.data.transformMode){case Dt.OnlyTranslation:m=e-t.worldX,g=i-t.worldY;break;case Dt.NoRotationOrReflection:let s=Math.abs(h*d-c*u)/(h*h+u*u),r=h/t.skeleton.scaleX,n=u/t.skeleton.scaleY;c=-n*s*t.skeleton.scaleX,d=r*s*t.skeleton.scaleY,f+=Math.atan2(n,r)*a.radDeg;default:let o=e-l.worldX,p=i-l.worldY,x=h*d-c*u;m=(o*d-p*c)/x-t.ax,g=(p*h-o*u)/x-t.ay}f+=Math.atan2(g,m)*a.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let p=t.ascaleX,x=t.ascaleY;if(s||r){switch(t.data.transformMode){case Dt.NoScale:case Dt.NoScaleOrReflection:m=e-t.worldX,g=i-t.worldY}let a=t.data.length*p,l=Math.sqrt(m*m+g*g);if(s&&l<a||r&&l>a&&a>1e-4){let t=(l/a-1)*o+1;p*=t,n&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*o,p,x,t.ashearX,t.ashearY)}apply2(t,e,i,s,r,n,o,l,h){let c=t.ax,u=t.ay,d=t.ascaleX,f=t.ascaleY,m=d,g=f,p=e.ascaleX,x=0,w=0,b=0;d<0?(d=-d,x=180,b=-1):(x=0,b=1),f<0&&(f=-f,b=-b),p<0?(p=-p,w=180):w=0;let y=e.ax,v=0,A=0,S=0,T=t.a,C=t.b,M=t.c,I=t.d,k=Math.abs(d-f)<=1e-4;!k||n?(v=0,A=T*y+t.worldX,S=M*y+t.worldY):(v=e.ay,A=T*y+C*v+t.worldX,S=M*y+I*v+t.worldY);let E=t.parent;if(!E)throw new Error("IK parent must itself have a parent.");T=E.a,C=E.b,M=E.c,I=E.d;let F,R,Y=1/(T*I-C*M),X=A-E.worldX,B=S-E.worldY,L=(X*I-B*C)*Y-c,P=(B*T-X*M)*Y-u,D=Math.sqrt(L*L+P*P),V=e.data.length*p;if(D<1e-4)return this.apply1(t,i,s,!1,n,!1,h),void e.updateWorldTransformWith(y,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);X=i-E.worldX,B=s-E.worldY;let O=(X*I-B*C)*Y-c,U=(B*T-X*M)*Y-u,N=O*O+U*U;if(0!=l){l*=d*(p+1)*.5;let t=Math.sqrt(N),e=t-D-V*d+l;if(e>0){let i=Math.min(1,e/(2*l))-1;i=(e-l*(1-i*i))/t,O-=i*O,U-=i*U,N=O*O+U*U}}t:if(k){V*=d;let t=(N-D*D-V*V)/(2*D*V);t<-1?(t=-1,R=Math.PI*r):t>1?(t=1,R=0,n&&(T=(Math.sqrt(N)/(D+V)-1)*h+1,m*=T,o&&(g*=T))):R=Math.acos(t)*r,T=D+V*t,C=V*Math.sin(R),F=Math.atan2(U*T-O*C,O*T+U*C)}else{T=d*V,C=f*V;let t=T*T,e=C*C,i=Math.atan2(U,O);M=e*D*D+t*N-t*e;let s=-2*e*D,n=e-t;if(I=s*s-4*n*M,I>=0){let t=Math.sqrt(I);s<0&&(t=-t),t=.5*-(s+t);let e=t/n,a=M/t,o=Math.abs(e)<Math.abs(a)?e:a;if(o*o<=N){B=Math.sqrt(N-o*o)*r,F=i-Math.atan2(B,o),R=Math.atan2(B/f,(o-D)/d);break t}}let o=a.PI,l=D-T,h=l*l,c=0,u=0,m=D+T,g=m*m,p=0;M=-T*D/(t-e),M>=-1&&M<=1&&(M=Math.acos(M),X=T*Math.cos(M)+D,B=C*Math.sin(M),I=X*X+B*B,I<h&&(o=M,h=I,l=X,c=B),I>g&&(u=M,g=I,m=X,p=B)),N<=.5*(h+g)?(F=i-Math.atan2(c*r,l),R=o*r):(F=i-Math.atan2(p*r,m),R=u*r)}let W=Math.atan2(v,y)*b,z=t.arotation;F=(F-W)*a.radDeg+x-z,F>180?F-=360:F<-180&&(F+=360),t.updateWorldTransformWith(c,u,z+F*h,m,g,0,0),z=e.arotation,R=((R+W)*a.radDeg-e.ashearX)*b+w-z,R>180?R-=360:R<-180&&(R+=360),e.updateWorldTransformWith(y,v,z+R*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class le extends ie{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class he extends ie{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Vt.Fixed,this.spacingMode=Ot.Fixed,this.rotateMode=Ut.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(Vt||(Vt={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(Ot||(Ot={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(Ut||(Ut={}));class ce{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,s=t.bones.length;i<s;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(s)}let i=e.findSlot(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=i,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof Kt))return;let e=this.mixRotate,i=this.mixX,s=this.mixY;if(0==e&&0==i&&0==s)return;let r=this.data,n=r.rotateMode==Ut.Tangent,o=r.rotateMode==Ut.ChainScale,l=this.bones,h=l.length,u=n?h:h+1,d=c.setArraySize(this.spaces,u),f=o?this.lengths=c.setArraySize(this.lengths,h):[],m=this.spacing;switch(r.spacingMode){case Ot.Percent:if(o)for(let t=0,e=u-1;t<e;t++){let e=l[t],i=e.data.length;if(i<ce.epsilon)f[t]=0;else{let s=i*e.a,r=i*e.c;f[t]=Math.sqrt(s*s+r*r)}}c.arrayFill(d,1,u,m);break;case Ot.Proportional:let t=0;for(let e=0,i=u-1;e<i;){let i=l[e],s=i.data.length;if(s<ce.epsilon)o&&(f[e]=0),d[++e]=m;else{let r=s*i.a,n=s*i.c,a=Math.sqrt(r*r+n*n);o&&(f[e]=a),d[++e]=a,t+=a}}if(t>0){t=u/t*m;for(let e=1;e<u;e++)d[e]*=t}break;default:let e=r.spacingMode==Ot.Length;for(let t=0,i=u-1;t<i;){let i=l[t],s=i.data.length;if(s<ce.epsilon)o&&(f[t]=0),d[++t]=m;else{let r=s*i.a,n=s*i.c,a=Math.sqrt(r*r+n*n);o&&(f[t]=a),d[++t]=(e?s+m:m)*a/s}}}let g=this.computeWorldPositions(t,u,n),p=g[0],x=g[1],w=r.offsetRotation,b=!1;if(0==w)b=r.rotateMode==Ut.Chain;else{b=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?a.degRad:-a.degRad}for(let t=0,r=3;t<h;t++,r+=3){let h=l[t];h.worldX+=(p-h.worldX)*i,h.worldY+=(x-h.worldY)*s;let c=g[r],u=g[r+1],m=c-p,y=u-x;if(o){let i=f[t];if(0!=i){let t=(Math.sqrt(m*m+y*y)/i-1)*e+1;h.a*=t,h.c*=t}}if(p=c,x=u,e>0){let i=h.a,s=h.b,o=h.c,l=h.d,c=0,u=0,f=0;if(c=n?g[r-1]:0==d[t+1]?g[r+2]:Math.atan2(y,m),c-=Math.atan2(o,i),b){u=Math.cos(c),f=Math.sin(c);let t=h.data.length;p+=(t*(u*i-f*o)-m)*e,x+=(t*(f*i+u*o)-y)*e}else c+=w;c>a.PI?c-=a.PI2:c<-a.PI&&(c+=a.PI2),c*=e,u=Math.cos(c),f=Math.sin(c),h.a=u*i-f*o,h.b=u*s-f*l,h.c=f*i+u*o,h.d=f*s+u*l}h.updateAppliedTransform()}}computeWorldPositions(t,e,i){let s=this.target,r=this.position,n=this.spaces,a=c.setArraySize(this.positions,3*e+2),o=this.world,l=t.closed,h=t.worldVerticesLength,u=h/6,d=ce.NONE;if(!t.constantSpeed){let f=t.lengths;u-=l?1:2;let m,g=f[u];switch(this.data.positionMode==Vt.Percent&&(r*=g),this.data.spacingMode){case Ot.Percent:m=g;break;case Ot.Proportional:m=g/e;break;default:m=1}o=c.setArraySize(this.world,8);for(let c=0,p=0,x=0;c<e;c++,p+=3){let e=n[c]*m;r+=e;let w=r;if(l)w%=g,w<0&&(w+=g),x=0;else{if(w<0){d!=ce.BEFORE&&(d=ce.BEFORE,t.computeWorldVertices(s,2,4,o,0,2)),this.addBeforePosition(w,o,0,a,p);continue}if(w>g){d!=ce.AFTER&&(d=ce.AFTER,t.computeWorldVertices(s,h-6,4,o,0,2)),this.addAfterPosition(w-g,o,0,a,p);continue}}for(;;x++){let t=f[x];if(!(w>t)){if(0==x)w/=t;else{let e=f[x-1];w=(w-e)/(t-e)}break}}x!=d&&(d=x,l&&x==u?(t.computeWorldVertices(s,h-4,4,o,0,2),t.computeWorldVertices(s,0,4,o,4,2)):t.computeWorldVertices(s,6*x+2,8,o,0,2)),this.addCurvePosition(w,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,p,i||c>0&&0==e)}return a}l?(h+=2,o=c.setArraySize(this.world,h),t.computeWorldVertices(s,2,h-4,o,0,2),t.computeWorldVertices(s,0,2,o,h-4,2),o[h-2]=o[0],o[h-1]=o[1]):(u--,h-=4,o=c.setArraySize(this.world,h),t.computeWorldVertices(s,2,h,o,0,2));let f,m=c.setArraySize(this.curves,u),g=0,p=o[0],x=o[1],w=0,b=0,y=0,v=0,A=0,S=0,T=0,C=0,M=0,I=0,k=0,E=0,F=0,R=0;for(let t=0,e=2;t<u;t++,e+=6)w=o[e],b=o[e+1],y=o[e+2],v=o[e+3],A=o[e+4],S=o[e+5],T=.1875*(p-2*w+y),C=.1875*(x-2*b+v),M=.09375*(3*(w-y)-p+A),I=.09375*(3*(b-v)-x+S),k=2*T+M,E=2*C+I,F=.75*(w-p)+T+.16666667*M,R=.75*(b-x)+C+.16666667*I,g+=Math.sqrt(F*F+R*R),F+=k,R+=E,k+=M,E+=I,g+=Math.sqrt(F*F+R*R),F+=k,R+=E,g+=Math.sqrt(F*F+R*R),F+=k+M,R+=E+I,g+=Math.sqrt(F*F+R*R),m[t]=g,p=A,x=S;switch(this.data.positionMode==Vt.Percent&&(r*=g),this.data.spacingMode){case Ot.Percent:f=g;break;case Ot.Proportional:f=g/e;break;default:f=1}let Y=this.segments,X=0;for(let t=0,s=0,c=0,u=0;t<e;t++,s+=3){let e=n[t]*f;r+=e;let B=r;if(l)B%=g,B<0&&(B+=g),c=0;else{if(B<0){this.addBeforePosition(B,o,0,a,s);continue}if(B>g){this.addAfterPosition(B-g,o,h-4,a,s);continue}}for(;;c++){let t=m[c];if(!(B>t)){if(0==c)B/=t;else{let e=m[c-1];B=(B-e)/(t-e)}break}}if(c!=d){d=c;let t=6*c;for(p=o[t],x=o[t+1],w=o[t+2],b=o[t+3],y=o[t+4],v=o[t+5],A=o[t+6],S=o[t+7],T=.03*(p-2*w+y),C=.03*(x-2*b+v),M=.006*(3*(w-y)-p+A),I=.006*(3*(b-v)-x+S),k=2*T+M,E=2*C+I,F=.3*(w-p)+T+.16666667*M,R=.3*(b-x)+C+.16666667*I,X=Math.sqrt(F*F+R*R),Y[0]=X,t=1;t<8;t++)F+=k,R+=E,k+=M,E+=I,X+=Math.sqrt(F*F+R*R),Y[t]=X;F+=k,R+=E,X+=Math.sqrt(F*F+R*R),Y[8]=X,F+=k+M,R+=E+I,X+=Math.sqrt(F*F+R*R),Y[9]=X,u=0}for(B*=X;;u++){let t=Y[u];if(!(B>t)){if(0==u)B/=t;else{let e=Y[u-1];B=u+(B-e)/(t-e)}break}}this.addCurvePosition(.1*B,p,x,w,b,y,v,A,S,a,s,i||t>0&&0==e)}return a}addBeforePosition(t,e,i,s,r){let n=e[i],a=e[i+1],o=e[i+2]-n,l=e[i+3]-a,h=Math.atan2(l,o);s[r]=n+t*Math.cos(h),s[r+1]=a+t*Math.sin(h),s[r+2]=h}addAfterPosition(t,e,i,s,r){let n=e[i+2],a=e[i+3],o=n-e[i],l=a-e[i+1],h=Math.atan2(l,o);s[r]=n+t*Math.cos(h),s[r+1]=a+t*Math.sin(h),s[r+2]=h}addCurvePosition(t,e,i,s,r,n,a,o,l,h,c,u){if(0==t||isNaN(t))return h[c]=e,h[c+1]=i,void(h[c+2]=Math.atan2(r-i,s-e));let d=t*t,f=d*t,m=1-t,g=m*m,p=g*m,x=m*t,w=3*x,b=m*w,y=w*t,v=e*p+s*b+n*y+o*f,A=i*p+r*b+a*y+l*f;h[c]=v,h[c+1]=A,u&&(h[c+2]=t<.001?Math.atan2(r-i,s-e):Math.atan2(A-(i*g+r*x*2+a*d),v-(e*g+s*x*2+n*d)))}}ce.NONE=-1,ce.BEFORE=-2,ce.AFTER=-3,ce.epsilon=1e-5;class ue{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n,this.darkColor=t.darkColor?new n:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof x&&this.attachment instanceof x&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class de{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new f,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let s=e.findBone(t.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(s)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=i}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,o=0!=e||0!=i,l=this.target,h=l.a,c=l.b,u=l.c,d=l.d,f=h*d-c*u>0?a.degRad:-a.degRad,m=this.data.offsetRotation*f,g=this.data.offsetShearY*f,p=this.bones;for(let f=0,x=p.length;f<x;f++){let x=p[f];if(0!=t){let e=x.a,i=x.b,s=x.c,r=x.d,n=Math.atan2(u,h)-Math.atan2(s,e)+m;n>a.PI?n-=a.PI2:n<-a.PI&&(n+=a.PI2),n*=t;let o=Math.cos(n),l=Math.sin(n);x.a=o*e-l*s,x.b=o*i-l*r,x.c=l*e+o*s,x.d=l*i+o*r}if(o){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*i}if(0!=s){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+u*u)-t+this.data.offsetScaleX)*s)/t),x.a*=t,x.c*=t}if(0!=r){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(c*c+d*d)-t+this.data.offsetScaleY)*r)/t),x.b*=t,x.d*=t}if(n>0){let t=x.b,e=x.d,i=Math.atan2(e,t),s=Math.atan2(d,c)-Math.atan2(u,h)-(i-Math.atan2(x.c,x.a));s>a.PI?s-=a.PI2:s<-a.PI&&(s+=a.PI2),s=i+(s+g)*n;let r=Math.sqrt(t*t+e*e);x.b=Math.cos(s)*r,x.d=Math.sin(s)*r}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,o=0!=e||0!=i,l=this.target,h=l.a,c=l.b,u=l.c,d=l.d,f=h*d-c*u>0?a.degRad:-a.degRad,m=this.data.offsetRotation*f,g=this.data.offsetShearY*f,p=this.bones;for(let f=0,x=p.length;f<x;f++){let x=p[f];if(0!=t){let e=x.a,i=x.b,s=x.c,r=x.d,n=Math.atan2(u,h)+m;n>a.PI?n-=a.PI2:n<-a.PI&&(n+=a.PI2),n*=t;let o=Math.cos(n),l=Math.sin(n);x.a=o*e-l*s,x.b=o*i-l*r,x.c=l*e+o*s,x.d=l*i+o*r}if(o){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*i}if(0!=s){let t=(Math.sqrt(h*h+u*u)-1+this.data.offsetScaleX)*s+1;x.a*=t,x.c*=t}if(0!=r){let t=(Math.sqrt(c*c+d*d)-1+this.data.offsetScaleY)*r+1;x.b*=t,x.d*=t}if(n>0){let t=Math.atan2(d,c)-Math.atan2(u,h);t>a.PI?t-=a.PI2:t<-a.PI&&(t+=a.PI2);let e=x.b,i=x.d;t=Math.atan2(i,e)+(t-a.PI/2+g)*n;let s=Math.sqrt(e*e+i*i);x.b=Math.cos(t)*s,x.d=Math.sin(t)*s}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=h.ax,d=h.ay;u+=(a.ax-u+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*i;let f=h.ascaleX,m=h.ascaleY;0!=s&&0!=f&&(f=(f+(a.ascaleX-f+this.data.offsetScaleX)*s)/f),0!=r&&0!=m&&(m=(m+(a.ascaleY-m+this.data.offsetScaleY)*r)/m);let g=h.ashearY;if(0!=n){let t=a.ashearY-g+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),g+=t*n}h.updateWorldTransformWith(u,d,c,f,m,h.ashearX,g)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation+(a.arotation+this.data.offsetRotation)*t,u=h.ax+(a.ax+this.data.offsetX)*e,d=h.ay+(a.ay+this.data.offsetY)*i,f=h.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*s+1),m=h.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*r+1),g=h.ashearY+(a.ashearY+this.data.offsetShearY)*n;h.updateWorldTransformWith(u,d,c,f,m,h.ashearX,g)}}}class fe{constructor(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,s=t.bones[e];if(s.parent){let t=this.bones[s.parent.index];i=new ee(s,this,t),t.children.push(i)}else i=new ee(s,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],s=this.bones[i.boneData.index],r=new ue(i,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new oe(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new de(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new ce(i,this))}this.color=new n(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let e=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,r=e.length,n=i.length,a=s.length,o=r+n+a;t:for(let t=0;t<o;t++){for(let i=0;i<r;i++){let s=e[i];if(s.data.order==t){this.sortIkConstraint(s);continue t}}for(let e=0;e<n;e++){let s=i[e];if(s.data.order==t){this.sortTransformConstraint(s);continue t}}for(let e=0;e<a;e++){let i=s[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&c.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,s=i[0];if(this.sortBone(s),1==i.length)this._updateCache.push(t),this.sortReset(s.children);else{let e=i[i.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(s.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&c.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,s=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,s);let r=e.getAttachment();r instanceof Kt&&this.sortPathConstraintAttachmentWith(r,s);let n=t.bones,a=n.length;for(let t=0;t<a;t++)this.sortBone(n[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(n[t].children);for(let t=0;t<a;t++)n[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&c.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this.sortBone(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let s=t.attachments[e];if(s)for(let t in s)this.sortPathConstraintAttachmentWith(s[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Kt))return;let i=t.bones;if(i){let t=this.bones;for(let e=0,s=i.length;e<s;){let s=i[e++];for(s+=e;e<s;)this.sortBone(t[i[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");let i=t.a,s=t.b,r=t.c,n=t.d;e.worldX=i*this.x+s*this.y+t.worldX,e.worldY=r*this.x+n*this.y+t.worldY;let o=e.rotation+90+e.shearY,l=a.cosDeg(e.rotation+e.shearX)*e.scaleX,h=a.cosDeg(o)*e.scaleY,c=a.sinDeg(e.rotation+e.shearX)*e.scaleX,u=a.sinDeg(o)*e.scaleY;e.a=(i*l+s*c)*this.scaleX,e.b=(i*h+s*u)*this.scaleX,e.c=(r*l+n*c)*this.scaleY,e.d=(r*h+n*u)*this.scaleY;let d=this._updateCache;for(let t=0,i=d.length;t<i;t++){let i=d[t];i!=e&&i.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.mix=i.data.mix,i.softness=i.data.softness,i.bendDirection=i.data.bendDirection,i.compress=i.data.compress,i.stretch=i.data.stretch}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY,e.mixScaleX=s.mixScaleX,e.mixScaleY=s.mixScaleY,e.mixShearY=s.mixShearY}let s=this.pathConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.position=i.position,e.spacing=i.spacing,e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY}}setSlotsToSetupPose(){let t=this.slots;c.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i],r=s.data.attachmentName;if(r){let e=t.getAttachment(i,r);e&&s.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let i=this.data.findSlot(t);if(!i)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(i.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,r=i.length;s<r;s++){let r=i[s];if(r.data.name==t){let i=null;if(e&&(i=this.getAttachment(s,e),!i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.data.name==t)return s}return null}getBoundsRect(){let t=new f,e=new f;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,i=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let s=this.drawOrder,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){let e=s[t];if(!e.bone.active)continue;let l=0,h=null,u=e.getAttachment();if(u instanceof Qt)l=8,h=c.setArraySize(i,l,0),u.computeWorldVertices(e,h,0,2);else if(u instanceof Zt){let t=u;l=t.worldVerticesLength,h=c.setArraySize(i,l,0),t.computeWorldVertices(e,0,l,h,0,2)}if(h)for(let t=0,e=h.length;t<e;t+=2){let e=h[t],i=h[t+1];r=Math.min(r,e),n=Math.min(n,i),a=Math.max(a,e),o=Math.max(o,i)}}t.set(r,n),e.set(a-r,o-n)}}class me{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){let s=e[i];if(s.name==t)return s}return null}}class ge{constructor(t=0,e,i){this.slotIndex=t,this.name=e,this.attachment=i}}class pe{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;t>=s.length&&(s.length=t+1),s[t]||(s[t]={}),s[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){s=!0;break}s||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],s=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){s=!0;break}s||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof Zt?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&delete i[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let s in i){let r=i[s];r&&t.push(new ge(e,s,r))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let s in i){let r=i[s];r&&e.push(new ge(t,s,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let s=0;s<t.slots.length;s++){let r=t.slots[s],n=r.getAttachment();if(n&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){if(n==t[e]){let t=this.getAttachment(i,e);t&&r.setAttachment(t);break}}}i++}}}class xe{constructor(t,e,i){if(this.index=0,this.color=new n(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Nt.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(Nt||(Nt={}));class we extends ie{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class be{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new me;i.name="";let s=new ye(t),r=s.readInt32(),a=s.readInt32();i.hash=0==a&&0==r?null:a.toString(16)+r.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat();let o=s.readBoolean();o&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let l=0;l=s.readInt(!0);for(let t=0;t<l;t++){let t=s.readString();if(!t)throw new Error("String in string table must not be null.");s.strings.push(t)}l=s.readInt(!0);for(let t=0;t<l;t++){let r=s.readString();if(!r)throw new Error("Bone name must not be null.");let a=0==t?null:i.bones[s.readInt(!0)],l=new te(t,r,a);l.rotation=s.readFloat(),l.x=s.readFloat()*e,l.y=s.readFloat()*e,l.scaleX=s.readFloat(),l.scaleY=s.readFloat(),l.shearX=s.readFloat(),l.shearY=s.readFloat(),l.length=s.readFloat()*e,l.transformMode=s.readInt(!0),l.skinRequired=s.readBoolean(),o&&n.rgba8888ToColor(l.color,s.readInt32()),i.bones.push(l)}l=s.readInt(!0);for(let t=0;t<l;t++){let e=s.readString();if(!e)throw new Error("Slot name must not be null.");let r=i.bones[s.readInt(!0)],a=new xe(t,e,r);n.rgba8888ToColor(a.color,s.readInt32());let o=s.readInt32();-1!=o&&n.rgb888ToColor(a.darkColor=new n,o),a.attachmentName=s.readStringRef(),a.blendMode=s.readInt(!0),i.slots.push(a)}l=s.readInt(!0);for(let t,r=0;r<l;r++){let r=s.readString();if(!r)throw new Error("IK constraint data name must not be null.");let n=new le(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.mix=s.readFloat(),n.softness=s.readFloat()*e,n.bendDirection=s.readByte(),n.compress=s.readBoolean(),n.stretch=s.readBoolean(),n.uniform=s.readBoolean(),i.ikConstraints.push(n)}l=s.readInt(!0);for(let t,r=0;r<l;r++){let r=s.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let n=new we(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.bones[s.readInt(!0)],n.local=s.readBoolean(),n.relative=s.readBoolean(),n.offsetRotation=s.readFloat(),n.offsetX=s.readFloat()*e,n.offsetY=s.readFloat()*e,n.offsetScaleX=s.readFloat(),n.offsetScaleY=s.readFloat(),n.offsetShearY=s.readFloat(),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),n.mixScaleX=s.readFloat(),n.mixScaleY=s.readFloat(),n.mixShearY=s.readFloat(),i.transformConstraints.push(n)}l=s.readInt(!0);for(let t,r=0;r<l;r++){let r=s.readString();if(!r)throw new Error("Path constraint data name must not be null.");let n=new he(r);n.order=s.readInt(!0),n.skinRequired=s.readBoolean(),t=s.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[s.readInt(!0)]);n.target=i.slots[s.readInt(!0)],n.positionMode=s.readInt(!0),n.spacingMode=s.readInt(!0),n.rotateMode=s.readInt(!0),n.offsetRotation=s.readFloat(),n.position=s.readFloat(),n.positionMode==Vt.Fixed&&(n.position*=e),n.spacing=s.readFloat(),n.spacingMode!=Ot.Length&&n.spacingMode!=Ot.Fixed||(n.spacing*=e),n.mixRotate=s.readFloat(),n.mixX=s.readFloat(),n.mixY=s.readFloat(),i.pathConstraints.push(n)}let h=this.readSkin(s,i,!0,o);h&&(i.defaultSkin=h,i.skins.push(h));{let t=i.skins.length;for(c.setArraySize(i.skins,l=t+s.readInt(!0));t<l;t++){let e=this.readSkin(s,i,!1,o);if(!e)throw new Error("readSkin() should not have returned null.");i.skins[t]=e}}l=this.linkedMeshes.length;for(let t=0;t<l;t++){let e=this.linkedMeshes[t],s=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!s)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");let r=s.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,l=s.readInt(!0);for(let t=0;t<l;t++){let t=s.readStringRef();if(!t)throw new Error;let e=new ae(t);e.intValue=s.readInt(!1),e.floatValue=s.readFloat(),e.stringValue=s.readString(),e.audioPath=s.readString(),e.audioPath&&(e.volume=s.readFloat(),e.balance=s.readFloat()),i.events.push(e)}l=s.readInt(!0);for(let t=0;t<l;t++){let t=s.readString();if(!t)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(s,t,i))}return i}readSkin(t,e,i,s){let r=null,n=0;if(i){if(n=t.readInt(!0),0==n)return null;r=new pe("default")}else{let i=t.readStringRef();if(!i)throw new Error("Skin name must not be null.");r=new pe(i),r.bones.length=t.readInt(!0);for(let i=0,s=r.bones.length;i<s;i++)r.bones[i]=e.bones[t.readInt(!0)];for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,s=t.readInt(!0);i<s;i++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);n=t.readInt(!0)}for(let i=0;i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let a=this.readAttachment(t,e,r,i,n,s);a&&r.setAttachment(i,n,a)}}return r}readAttachment(t,e,i,s,r,a){let o=this.scale,l=t.readStringRef();switch(l||(l=r),t.readByte()){case Wt.Region:{let e=t.readStringRef(),s=t.readFloat(),r=t.readFloat(),a=t.readFloat(),h=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readInt32(),m=this.readSequence(t);e||(e=l);let g=this.attachmentLoader.newRegionAttachment(i,l,e,m);return g?(g.path=e,g.x=r*o,g.y=a*o,g.scaleX=h,g.scaleY=c,g.rotation=s,g.width=u*o,g.height=d*o,n.rgba8888ToColor(g.color,f),g.sequence=m,null==m&&g.updateRegion(),g):null}case Wt.BoundingBox:{let e=t.readInt(!0),s=this.readVertices(t,e),r=a?t.readInt32():0,o=this.attachmentLoader.newBoundingBoxAttachment(i,l);return o?(o.worldVerticesLength=e<<1,o.vertices=s.vertices,o.bones=s.bones,a&&n.rgba8888ToColor(o.color,r),o):null}case Wt.Mesh:{let e=t.readStringRef(),s=t.readInt32(),r=t.readInt(!0),h=this.readFloatArray(t,r<<1,1),c=this.readShortArray(t),u=this.readVertices(t,r),d=t.readInt(!0),f=this.readSequence(t),m=[],g=0,p=0;a&&(m=this.readShortArray(t),g=t.readFloat(),p=t.readFloat()),e||(e=l);let x=this.attachmentLoader.newMeshAttachment(i,l,e,f);return x?(x.path=e,n.rgba8888ToColor(x.color,s),x.bones=u.bones,x.vertices=u.vertices,x.worldVerticesLength=r<<1,x.triangles=c,x.regionUVs=h,null==f&&x.updateRegion(),x.hullLength=d<<1,x.sequence=f,a&&(x.edges=m,x.width=g*o,x.height=p*o),x):null}case Wt.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),h=t.readStringRef(),c=t.readStringRef(),u=t.readBoolean(),d=this.readSequence(t),f=0,m=0;a&&(f=t.readFloat(),m=t.readFloat()),e||(e=l);let g=this.attachmentLoader.newMeshAttachment(i,l,e,d);return g?(g.path=e,n.rgba8888ToColor(g.color,r),g.sequence=d,a&&(g.width=f*o,g.height=m*o),this.linkedMeshes.push(new ve(g,h,s,c,u)),g):null}case Wt.Path:{let e=t.readBoolean(),s=t.readBoolean(),r=t.readInt(!0),h=this.readVertices(t,r),u=c.newArray(r/3,0);for(let e=0,i=u.length;e<i;e++)u[e]=t.readFloat()*o;let d=a?t.readInt32():0,f=this.attachmentLoader.newPathAttachment(i,l);return f?(f.closed=e,f.constantSpeed=s,f.worldVerticesLength=r<<1,f.vertices=h.vertices,f.bones=h.bones,f.lengths=u,a&&n.rgba8888ToColor(f.color,d),f):null}case Wt.Point:{let e=t.readFloat(),s=t.readFloat(),r=t.readFloat(),h=a?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(i,l);return c?(c.x=s*o,c.y=r*o,c.rotation=e,a&&n.rgba8888ToColor(c.color,h),c):null}case Wt.Clipping:{let s=t.readInt(!0),r=t.readInt(!0),o=this.readVertices(t,r),h=a?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(i,l);return c?(c.endSlot=e.slots[s],c.worldVerticesLength=r<<1,c.vertices=o.vertices,c.bones=o.bones,a&&n.rgba8888ToColor(c.color,h),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new w(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let i=this.scale,s=e<<1,r=new Ae;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,s,i),r;let n=new Array,a=new Array;for(let s=0;s<e;s++){let e=t.readInt(!0);a.push(e);for(let s=0;s<e;s++)a.push(t.readInt(!0)),n.push(t.readFloat()*i),n.push(t.readFloat()*i),n.push(t.readFloat())}return r.vertices=c.toFloatArray(n),r.bones=a,r}readFloatArray(t,e,i){let s=new Array(e);if(1==i)for(let i=0;i<e;i++)s[i]=t.readFloat();else for(let r=0;r<e;r++)s[r]=t.readFloat()*i;return s}readShortArray(t){let e=t.readInt(!0),i=new Array(e);for(let s=0;s<e;s++)i[s]=t.readShort();return i}readAnimation(t,e,i){t.readInt(!0);let s=new Array,r=this.scale;new n,new n;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,r=t.readInt(!0);i<r;i++){let i=t.readByte(),r=t.readInt(!0),n=r-1;switch(i){case Pe:{let i=new ht(r,e);for(let e=0;e<r;e++)i.setFrame(e,t.readFloat(),t.readStringRef());s.push(i);break}case De:{let i=t.readInt(!0),a=new rt(r,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,u),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case He:Ce(t,a,i++,e,0,o,s,l,r,1),Ce(t,a,i++,e,1,o,s,h,n,1),Ce(t,a,i++,e,2,o,s,c,d,1),Ce(t,a,i++,e,3,o,s,u,f,1)}o=s,l=r,h=n,c=d,u=f}s.push(a);break}case Ve:{let i=t.readInt(!0),a=new nt(r,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case He:Ce(t,a,i++,e,0,o,s,l,r,1),Ce(t,a,i++,e,1,o,s,h,n,1),Ce(t,a,i++,e,2,o,s,c,u,1)}o=s,l=r,h=n,c=u}s.push(a);break}case Oe:{let i=t.readInt(!0),a=new ot(r,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,u,d,f,m),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case He:Ce(t,a,i++,e,0,o,s,l,r,1),Ce(t,a,i++,e,1,o,s,h,n,1),Ce(t,a,i++,e,2,o,s,c,g,1),Ce(t,a,i++,e,3,o,s,u,p,1),Ce(t,a,i++,e,4,o,s,d,x,1),Ce(t,a,i++,e,5,o,s,f,w,1),Ce(t,a,i++,e,6,o,s,m,b,1)}o=s,l=r,h=n,c=g,u=p,d=x,f=w,m=b}s.push(a);break}case Ue:{let i=t.readInt(!0),a=new lt(r,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,u,d,f),e!=n;e++){let s=t.readFloat(),r=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:a.setStepped(e);break;case He:Ce(t,a,i++,e,0,o,s,l,r,1),Ce(t,a,i++,e,1,o,s,h,n,1),Ce(t,a,i++,e,2,o,s,c,m,1),Ce(t,a,i++,e,3,o,s,u,g,1),Ce(t,a,i++,e,4,o,s,d,p,1),Ce(t,a,i++,e,5,o,s,f,x,1)}o=s,l=r,h=n,c=m,u=g,d=p,f=x}s.push(a);break}case Ne:{let i=new at(r,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,s=0;i.setFrame(e,a,o),e!=n;e++){let r=t.readFloat(),n=t.readUnsignedByte()/255;switch(t.readByte()){case Ge:i.setStepped(e);break;case He:Ce(t,i,s++,e,0,a,r,o,n,1)}a=r,o=n}s.push(i)}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readByte(),n=t.readInt(!0),a=t.readInt(!0);switch(i){case Me:s.push(Se(t,new H(n,a,e),1));break;case Ie:s.push(Te(t,new Z(n,a,e),r));break;case ke:s.push(Se(t,new K(n,a,e),r));break;case Ee:s.push(Se(t,new J(n,a,e),r));break;case Fe:s.push(Te(t,new Q(n,a,e),1));break;case Re:s.push(Se(t,new $(n,a,e),1));break;case Ye:s.push(Se(t,new tt(n,a,e),1));break;case Xe:s.push(Te(t,new et(n,a,e),1));break;case Be:s.push(Se(t,new it(n,a,e),1));break;case Le:s.push(Se(t,new st(n,a,e),1))}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),n=i-1,a=new ft(i,t.readInt(!0),e),o=t.readFloat(),l=t.readFloat(),h=t.readFloat()*r;for(let e=0,i=0;a.setFrame(e,o,l,h,t.readByte(),t.readBoolean(),t.readBoolean()),e!=n;e++){let s=t.readFloat(),n=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case Ge:a.setStepped(e);break;case He:Ce(t,a,i++,e,0,o,s,l,n,1),Ce(t,a,i++,e,1,o,s,h,c,r)}o=s,l=n,h=c}s.push(a)}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),r=i-1,n=new mt(i,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=t.readFloat();for(let e=0,i=0;n.setFrame(e,a,o,l,h,c,u,d),e!=r;e++){let s=t.readFloat(),r=t.readFloat(),f=t.readFloat(),m=t.readFloat(),g=t.readFloat(),p=t.readFloat(),x=t.readFloat();switch(t.readByte()){case Ge:n.setStepped(e);break;case He:Ce(t,n,i++,e,0,a,s,o,r,1),Ce(t,n,i++,e,1,a,s,l,f,1),Ce(t,n,i++,e,2,a,s,h,m,1),Ce(t,n,i++,e,3,a,s,c,g,1),Ce(t,n,i++,e,4,a,s,u,p,1),Ce(t,n,i++,e,5,a,s,d,x,1)}a=s,o=r,l=f,h=m,c=g,u=p,d=x}s.push(n)}for(let e=0,n=t.readInt(!0);e<n;e++){let e=t.readInt(!0),n=i.pathConstraints[e];for(let i=0,a=t.readInt(!0);i<a;i++)switch(t.readByte()){case qe:s.push(Se(t,new gt(t.readInt(!0),t.readInt(!0),e),n.positionMode==Vt.Fixed?r:1));break;case _e:s.push(Se(t,new pt(t.readInt(!0),t.readInt(!0),e),n.spacingMode==Ot.Length||n.spacingMode==Ot.Fixed?r:1));break;case je:let i=new xt(t.readInt(!0),t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat();for(let e=0,s=0,r=i.getFrameCount()-1;i.setFrame(e,a,o,l,h),e!=r;e++){let r=t.readFloat(),n=t.readFloat(),c=t.readFloat(),u=t.readFloat();switch(t.readByte()){case Ge:i.setStepped(e);break;case He:Ce(t,i,s++,e,0,a,r,o,n,1),Ce(t,i,s++,e,1,a,r,l,c,1),Ce(t,i,s++,e,2,a,r,h,u,1)}a=r,o=n,l=c,h=u}s.push(i)}}for(let e=0,n=t.readInt(!0);e<n;e++){let e=i.skins[t.readInt(!0)];for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("attachmentName must not be null.");let a=e.getAttachment(i,n),o=t.readByte(),l=t.readInt(!0),h=l-1;switch(o){case We:{let e=a,n=e.bones,o=e.vertices,u=n?o.length/3*2:o.length,d=t.readInt(!0),f=new ct(l,d,i,e),m=t.readFloat();for(let e=0,i=0;;e++){let s,a=t.readInt(!0);if(0==a)s=n?c.newFloatArray(u):o;else{s=c.newFloatArray(u);let e=t.readInt(!0);if(a+=e,1==r)for(let i=e;i<a;i++)s[i]=t.readFloat();else for(let i=e;i<a;i++)s[i]=t.readFloat()*r;if(!n)for(let t=0,e=s.length;t<e;t++)s[t]+=o[t]}if(f.setFrame(e,m,s),e==h)break;let l=t.readFloat();switch(t.readByte()){case Ge:f.setStepped(e);break;case He:Ce(t,f,i++,e,0,m,l,0,1,1)}m=l}s.push(f);break}case ze:{let e=new wt(l,i,a);for(let i=0;i<l;i++){let s=t.readFloat(),r=t.readInt32();e.setFrame(i,s,y[15&r],r>>4,t.readFloat())}s.push(e);break}}}}}let a=t.readInt(!0);if(a>0){let e=new dt(a),r=i.slots.length;for(let i=0;i<a;i++){let s=t.readFloat(),n=t.readInt(!0),a=c.newArray(r,0);for(let t=r-1;t>=0;t--)a[t]=-1;let o=c.newArray(r-n,0),l=0,h=0;for(let e=0;e<n;e++){let e=t.readInt(!0);for(;l!=e;)o[h++]=l++;a[l+t.readInt(!0)]=l++}for(;l<r;)o[h++]=l++;for(let t=r-1;t>=0;t--)-1==a[t]&&(a[t]=o[--h]);e.setFrame(i,s,a)}s.push(e)}let o=t.readInt(!0);if(o>0){let e=new ut(o);for(let s=0;s<o;s++){let r=t.readFloat(),n=i.events[t.readInt(!0)],a=new ne(r,n);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readBoolean()?t.readString():n.stringValue,a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(s,a)}s.push(e)}let l=0;for(let t=0,e=s.length;t<e;t++)l=Math.max(l,s[t].getDuration());return new v(e,s,l)}}class ye{constructor(t,e=new Array,i=0,s=new DataView(t.buffer)){this.strings=e,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=127&e;return 0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(t),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}}class ve{constructor(t,e,i,s,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}}class Ae{constructor(t=null,e=null){this.bones=t,this.vertices=e}}function Se(t,e,i){let s=t.readFloat(),r=t.readFloat()*i;for(let n=0,a=0,o=e.getFrameCount()-1;e.setFrame(n,s,r),n!=o;n++){let o=t.readFloat(),l=t.readFloat()*i;switch(t.readByte()){case Ge:e.setStepped(n);break;case He:Ce(t,e,a++,n,0,s,o,r,l,i)}s=o,r=l}return e}function Te(t,e,i){let s=t.readFloat(),r=t.readFloat()*i,n=t.readFloat()*i;for(let a=0,o=0,l=e.getFrameCount()-1;e.setFrame(a,s,r,n),a!=l;a++){let l=t.readFloat(),h=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case Ge:e.setStepped(a);break;case He:Ce(t,e,o++,a,0,s,l,r,h,i),Ce(t,e,o++,a,1,s,l,n,c,i)}s=l,r=h,n=c}return e}function Ce(t,e,i,s,r,n,a,o,l,h){e.setBezier(i,s,r,n,o,t.readFloat(),t.readFloat()*h,t.readFloat(),t.readFloat()*h,a,l)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(Wt||(Wt={}));const Me=0,Ie=1,ke=2,Ee=3,Fe=4,Re=5,Ye=6,Xe=7,Be=8,Le=9,Pe=0,De=1,Ve=2,Oe=3,Ue=4,Ne=5,We=0,ze=1,qe=0,_e=1,je=2,Ge=1,He=2;class Ze{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new d((()=>c.newFloatArray(16)))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,r=this.polygonPool,n=t.slots,a=n.length;i.length=0,r.freeAll(s),s.length=0;for(let t=0;t<a;t++){let e=n[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof Yt){let t=a;i.push(t);let n=r.obtain();n.length!=t.worldVerticesLength&&(n=c.newFloatArray(t.worldVerticesLength)),s.push(n),t.computeWorldVertices(e,0,t.worldVerticesLength,n,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=this.polygons;for(let n=0,a=r.length;n<a;n++){let a=r[n],o=a;for(let r=0,n=a.length;r<n;r+=2){let n=o[r],a=o[r+1];t=Math.min(t,n),e=Math.min(e,a),i=Math.max(i,n),s=Math.max(s,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,s){let r=this.minX,n=this.minY,a=this.maxX,o=this.maxY;if(t<=r&&i<=r||e<=n&&s<=n||t>=a&&i>=a||e>=o&&s>=o)return!1;let l=(s-e)/(i-t),h=l*(r-t)+e;if(h>n&&h<o)return!0;if(h=l*(a-t)+e,h>n&&h<o)return!0;let c=(n-e)/l+t;return c>r&&c<a||(c=(o-e)/l+t,c>r&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let s=0,r=i.length;s<r;s++)if(this.containsPointPolygon(i[s],t,e))return this.boundingBoxes[s];return null}containsPointPolygon(t,e,i){let s=t,r=t.length,n=r-2,a=!1;for(let t=0;t<r;t+=2){let r=s[t+1],o=s[n+1];if(r<i&&o>=i||o<i&&r>=i){let l=s[t];l+(i-r)/(o-r)*(s[n]-l)<e&&(a=!a)}n=t}return a}intersectsSegment(t,e,i,s){let r=this.polygons;for(let n=0,a=r.length;n<a;n++)if(this.intersectsSegmentPolygon(r[n],t,e,i,s))return this.boundingBoxes[n];return null}intersectsSegmentPolygon(t,e,i,s,r){let n=t,a=t.length,o=e-s,l=i-r,h=e*r-i*s,c=n[a-2],u=n[a-1];for(let t=0;t<a;t+=2){let a=n[t],d=n[t+1],f=c*d-u*a,m=c-a,g=u-d,p=o*g-l*m,x=(h*m-o*f)/p;if((x>=c&&x<=a||x>=a&&x<=c)&&(x>=e&&x<=s||x>=s&&x<=e)){let t=(h*g-l*f)/p;if((t>=u&&t<=d||t>=d&&t<=u)&&(t>=i&&t<=r||t>=r&&t<=i))return!0}c=a,u=d}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class Ke{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new d((()=>new Array)),this.polygonIndicesPool=new d((()=>new Array))}triangulate(t){let e=t,i=t.length>>1,s=this.indicesArray;s.length=0;for(let t=0;t<i;t++)s[t]=t;let r=this.isConcaveArray;r.length=0;for(let t=0,n=i;t<n;++t)r[t]=Ke.isConcave(t,i,e,s);let n=this.triangles;for(n.length=0;i>3;){let t=i-1,a=0,o=1;for(;;){t:if(!r[a]){let n=s[t]<<1,l=s[a]<<1,h=s[o]<<1,c=e[n],u=e[n+1],d=e[l],f=e[l+1],m=e[h],g=e[h+1];for(let n=(o+1)%i;n!=t;n=(n+1)%i){if(!r[n])continue;let t=s[n]<<1,i=e[t],a=e[t+1];if(Ke.positiveArea(m,g,c,u,i,a)&&Ke.positiveArea(c,u,d,f,i,a)&&Ke.positiveArea(d,f,m,g,i,a))break t}break}if(0==o){do{if(!r[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%i}n.push(s[(i+a-1)%i]),n.push(s[a]),n.push(s[(a+1)%i]),s.splice(a,1),r.splice(a,1),i--;let l=(i+a-1)%i,h=a==i?0:a;r[l]=Ke.isConcave(l,i,e,s),r[h]=Ke.isConcave(h,i,e,s)}return 3==i&&(n.push(s[2]),n.push(s[0]),n.push(s[1])),n}decompose(t,e){let i=t,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let n=this.polygonIndicesPool.obtain();n.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,l=0;for(let t=0,h=e.length;t<h;t+=3){let h=e[t]<<1,c=e[t+1]<<1,u=e[t+2]<<1,d=i[h],f=i[h+1],m=i[c],g=i[c+1],p=i[u],x=i[u+1],w=!1;if(o==h){let t=a.length-4,e=Ke.winding(a[t],a[t+1],a[t+2],a[t+3],p,x),i=Ke.winding(p,x,a[0],a[1],a[2],a[3]);e==l&&i==l&&(a.push(p),a.push(x),n.push(u),w=!0)}w||(a.length>0?(s.push(a),r.push(n)):(this.polygonPool.free(a),this.polygonIndicesPool.free(n)),a=this.polygonPool.obtain(),a.length=0,a.push(d),a.push(f),a.push(m),a.push(g),a.push(p),a.push(x),n=this.polygonIndicesPool.obtain(),n.length=0,n.push(h),n.push(c),n.push(u),l=Ke.winding(d,f,m,g,p,x),o=h)}a.length>0&&(s.push(a),r.push(n));for(let t=0,e=s.length;t<e;t++){if(n=r[t],0==n.length)continue;let i=n[0],o=n[n.length-1];a=s[t];let l=a.length-4,h=a[l],c=a[l+1],u=a[l+2],d=a[l+3],f=a[0],m=a[1],g=a[2],p=a[3],x=Ke.winding(h,c,u,d,f,m);for(let l=0;l<e;l++){if(l==t)continue;let e=r[l];if(3!=e.length)continue;let w=e[0],b=e[1],y=e[2],v=s[l],A=v[v.length-2],S=v[v.length-1];if(w!=i||b!=o)continue;let T=Ke.winding(h,c,u,d,A,S),C=Ke.winding(A,S,f,m,g,p);T==x&&C==x&&(v.length=0,e.length=0,a.push(A),a.push(S),n.push(y),h=u,c=d,u=A,d=S,l=0)}}for(let t=s.length-1;t>=0;t--)a=s[t],0==a.length&&(s.splice(t,1),this.polygonPool.free(a),n=r[t],r.splice(t,1),this.polygonIndicesPool.free(n));return s}static isConcave(t,e,i,s){let r=s[(e+t-1)%e]<<1,n=s[t]<<1,a=s[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[n],i[n+1],i[a],i[a+1])}static positiveArea(t,e,i,s,r,n){return t*(n-s)+i*(e-n)+r*(s-e)>=0}static winding(t,e,i,s,r,n){let a=i-t,o=s-e;return r*o-n*a+a*e-t*o>=0?1:-1}}class Je{constructor(){this.triangulator=new Ke,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let i=e.worldVerticesLength,s=c.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,s,0,2);let r=this.clippingPolygon;Je.makeClockwise(r);let n=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=n.length;t<e;t++){let e=n[t];Je.makeClockwise(e),e.push(e[0]),e.push(e[1])}return n.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,i,s,r,n,a,o){let l=this.clipOutput,h=this.clippedVertices,u=this.clippedTriangles,d=this.clippingPolygons,f=d.length,m=o?12:8,g=0;h.length=0,u.length=0;t:for(let e=0;e<s;e+=3){let s=i[e]<<1,p=t[s],x=t[s+1],w=r[s],b=r[s+1];s=i[e+1]<<1;let y=t[s],v=t[s+1],A=r[s],S=r[s+1];s=i[e+2]<<1;let T=t[s],C=t[s+1],M=r[s],I=r[s+1];for(let t=0;t<f;t++){let e=h.length;if(!this.clip(p,x,y,v,T,C,d[t],l)){let t=c.setArraySize(h,e+3*m);t[e]=p,t[e+1]=x,t[e+2]=n.r,t[e+3]=n.g,t[e+4]=n.b,t[e+5]=n.a,o?(t[e+6]=w,t[e+7]=b,t[e+8]=a.r,t[e+9]=a.g,t[e+10]=a.b,t[e+11]=a.a,t[e+12]=y,t[e+13]=v,t[e+14]=n.r,t[e+15]=n.g,t[e+16]=n.b,t[e+17]=n.a,t[e+18]=A,t[e+19]=S,t[e+20]=a.r,t[e+21]=a.g,t[e+22]=a.b,t[e+23]=a.a,t[e+24]=T,t[e+25]=C,t[e+26]=n.r,t[e+27]=n.g,t[e+28]=n.b,t[e+29]=n.a,t[e+30]=M,t[e+31]=I,t[e+32]=a.r,t[e+33]=a.g,t[e+34]=a.b,t[e+35]=a.a):(t[e+6]=w,t[e+7]=b,t[e+8]=y,t[e+9]=v,t[e+10]=n.r,t[e+11]=n.g,t[e+12]=n.b,t[e+13]=n.a,t[e+14]=A,t[e+15]=S,t[e+16]=T,t[e+17]=C,t[e+18]=n.r,t[e+19]=n.g,t[e+20]=n.b,t[e+21]=n.a,t[e+22]=M,t[e+23]=I),e=u.length;let i=c.setArraySize(u,e+3);i[e]=g,i[e+1]=g+1,i[e+2]=g+2,g+=3;continue t}{let t=l.length;if(0==t)continue;let i=v-C,s=T-y,r=p-T,d=C-x,f=1/(i*r+s*(x-C)),k=t>>1,E=this.clipOutput,F=c.setArraySize(h,e+k*m);for(let l=0;l<t;l+=2){let t=E[l],h=E[l+1];F[e]=t,F[e+1]=h,F[e+2]=n.r,F[e+3]=n.g,F[e+4]=n.b,F[e+5]=n.a;let c=t-T,u=h-C,g=(i*c+s*u)*f,p=(d*c+r*u)*f,x=1-g-p;F[e+6]=w*g+A*p+M*x,F[e+7]=b*g+S*p+I*x,o&&(F[e+8]=a.r,F[e+9]=a.g,F[e+10]=a.b,F[e+11]=a.a),e+=m}e=u.length;let R=c.setArraySize(u,e+3*(k-2));k--;for(let t=1;t<k;t++)R[e]=g,R[e+1]=g+t,R[e+2]=g+t+1,e+=3;g+=k+1}}}}clip(t,e,i,s,r,n,a,o){let l,h=o,c=!1;a.length%4>=2?(l=o,o=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(i),l.push(s),l.push(r),l.push(n),l.push(t),l.push(e),o.length=0;let u=a,d=a.length-4;for(let t=0;;t+=2){let e=u[t],i=u[t+1],s=u[t+2],r=u[t+3],n=e-s,a=i-r,f=l,m=l.length-2,g=o.length;for(let t=0;t<m;t+=2){let l=f[t],h=f[t+1],u=f[t+2],d=f[t+3],m=n*(d-r)-a*(u-s)>0;if(n*(h-r)-a*(l-s)>0){if(m){o.push(u),o.push(d);continue}let t=d-h,n=u-l,a=t*(s-e)-n*(r-i);if(Math.abs(a)>1e-6){let c=(n*(i-h)-t*(e-l))/a;o.push(e+(s-e)*c),o.push(i+(r-i)*c)}else o.push(e),o.push(i)}else if(m){let t=d-h,n=u-l,a=t*(s-e)-n*(r-i);if(Math.abs(a)>1e-6){let c=(n*(i-h)-t*(e-l))/a;o.push(e+(s-e)*c),o.push(i+(r-i)*c)}else o.push(e),o.push(i);o.push(u),o.push(d)}c=!0}if(g==o.length)return h.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==d)break;let p=o;(o=l).length=0,l=p}if(h!=o){h.length=0;for(let t=0,e=o.length-2;t<e;t++)h[t]=o[t]}else h.length=h.length-2;return c}static makeClockwise(t){let e=t,i=t.length,s=e[i-2]*e[1]-e[0]*e[i-1],r=0,n=0,a=0,o=0;for(let t=0,l=i-3;t<l;t+=2)r=e[t],n=e[t+1],a=e[t+2],o=e[t+3],s+=r*o-a*n;if(!(s<0))for(let t=0,s=i-2,r=i>>1;t<r;t+=2){let i=e[t],r=e[t+1],n=s-t;e[t]=e[n],e[t+1]=e[n+1],e[n]=i,e[n+1]=r}}}class Qe{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new me,s="string"==typeof t?JSON.parse(t):t,r=s.skeleton;if(r&&(i.hash=r.hash,i.version=r.spine,i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images),s.bones)for(let t=0;t<s.bones.length;t++){let r=s.bones[t],n=null,a=si(r,"parent",null);a&&(n=i.findBone(a));let o=new te(i.bones.length,r.name,n);o.length=si(r,"length",0)*e,o.x=si(r,"x",0)*e,o.y=si(r,"y",0)*e,o.rotation=si(r,"rotation",0),o.scaleX=si(r,"scaleX",1),o.scaleY=si(r,"scaleY",1),o.shearX=si(r,"shearX",0),o.shearY=si(r,"shearY",0),o.transformMode=c.enumValue(Dt,si(r,"transform","Normal")),o.skinRequired=si(r,"skin",!1);let l=si(r,"color",null);l&&o.color.setFromString(l),i.bones.push(o)}if(s.slots)for(let t=0;t<s.slots.length;t++){let e=s.slots[t],r=i.findBone(e.bone);if(!r)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);let a=new xe(i.slots.length,e.name,r),o=si(e,"color",null);o&&a.color.setFromString(o);let l=si(e,"dark",null);l&&(a.darkColor=n.fromString(l)),a.attachmentName=si(e,"attachment",null),a.blendMode=c.enumValue(Nt,si(e,"blend","normal")),i.slots.push(a)}if(s.ik)for(let t=0;t<s.ik.length;t++){let r=s.ik[t],n=new le(r.name);n.order=si(r,"order",0),n.skinRequired=si(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=i.findBone(r.bones[t]);if(!e)throw new Error(`Couldn't find bone ${r.bones[t]} for IK constraint ${r.name}.`);n.bones.push(e)}let a=i.findBone(r.target);if(!a)throw new Error(`Couldn't find target bone ${r.target} for IK constraint ${r.name}.`);n.target=a,n.mix=si(r,"mix",1),n.softness=si(r,"softness",0)*e,n.bendDirection=si(r,"bendPositive",!0)?1:-1,n.compress=si(r,"compress",!1),n.stretch=si(r,"stretch",!1),n.uniform=si(r,"uniform",!1),i.ikConstraints.push(n)}if(s.transform)for(let t=0;t<s.transform.length;t++){let r=s.transform[t],n=new we(r.name);n.order=si(r,"order",0),n.skinRequired=si(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],s=i.findBone(e);if(!s)throw new Error(`Couldn't find bone ${e} for transform constraint ${r.name}.`);n.bones.push(s)}let a=r.target,o=i.findBone(a);if(!o)throw new Error(`Couldn't find target bone ${a} for transform constraint ${r.name}.`);n.target=o,n.local=si(r,"local",!1),n.relative=si(r,"relative",!1),n.offsetRotation=si(r,"rotation",0),n.offsetX=si(r,"x",0)*e,n.offsetY=si(r,"y",0)*e,n.offsetScaleX=si(r,"scaleX",0),n.offsetScaleY=si(r,"scaleY",0),n.offsetShearY=si(r,"shearY",0),n.mixRotate=si(r,"mixRotate",1),n.mixX=si(r,"mixX",1),n.mixY=si(r,"mixY",n.mixX),n.mixScaleX=si(r,"mixScaleX",1),n.mixScaleY=si(r,"mixScaleY",n.mixScaleX),n.mixShearY=si(r,"mixShearY",1),i.transformConstraints.push(n)}if(s.path)for(let t=0;t<s.path.length;t++){let r=s.path[t],n=new he(r.name);n.order=si(r,"order",0),n.skinRequired=si(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],s=i.findBone(e);if(!s)throw new Error(`Couldn't find bone ${e} for path constraint ${r.name}.`);n.bones.push(s)}let a=r.target,o=i.findSlot(a);if(!o)throw new Error(`Couldn't find target slot ${a} for path constraint ${r.name}.`);n.target=o,n.positionMode=c.enumValue(Vt,si(r,"positionMode","Percent")),n.spacingMode=c.enumValue(Ot,si(r,"spacingMode","Length")),n.rotateMode=c.enumValue(Ut,si(r,"rotateMode","Tangent")),n.offsetRotation=si(r,"rotation",0),n.position=si(r,"position",0),n.positionMode==Vt.Fixed&&(n.position*=e),n.spacing=si(r,"spacing",0),n.spacingMode!=Ot.Length&&n.spacingMode!=Ot.Fixed||(n.spacing*=e),n.mixRotate=si(r,"mixRotate",1),n.mixX=si(r,"mixX",1),n.mixY=si(r,"mixY",n.mixX),i.pathConstraints.push(n)}if(s.skins)for(let t=0;t<s.skins.length;t++){let e=s.skins[t],r=new pe(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let s=e.bones[t],n=i.findBone(s);if(!n)throw new Error(`Couldn't find bone ${s} for skin ${e.name}.`);r.bones.push(n)}if(e.ik)for(let t=0;t<e.ik.length;t++){let s=e.ik[t],n=i.findIkConstraint(s);if(!n)throw new Error(`Couldn't find IK constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}if(e.transform)for(let t=0;t<e.transform.length;t++){let s=e.transform[t],n=i.findTransformConstraint(s);if(!n)throw new Error(`Couldn't find transform constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}if(e.path)for(let t=0;t<e.path.length;t++){let s=e.path[t],n=i.findPathConstraint(s);if(!n)throw new Error(`Couldn't find path constraint ${s} for skin ${e.name}.`);r.constraints.push(n)}for(let t in e.attachments){let s=i.findSlot(t);if(!s)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let n=e.attachments[t];for(let t in n){let e=this.readAttachment(n[t],r,s.index,t,i);e&&r.setAttachment(s.index,t,e)}}i.skins.push(r),"default"==r.name&&(i.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],s=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!s)throw new Error(`Skin not found: ${e.skin}`);let r=s.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,s.events)for(let t in s.events){let e=s.events[t],r=new ae(t);r.intValue=si(e,"int",0),r.floatValue=si(e,"float",0),r.stringValue=si(e,"string",""),r.audioPath=si(e,"audio",null),r.audioPath&&(r.volume=si(e,"volume",1),r.balance=si(e,"balance",0)),i.events.push(r)}if(s.animations)for(let t in s.animations){let e=s.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,s,r){let n=this.scale;switch(s=si(t,"name",s),si(t,"type","region")){case"region":{let i=si(t,"path",s),r=this.readSequence(si(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,s,i,r);if(!a)return null;a.path=i,a.x=si(t,"x",0)*n,a.y=si(t,"y",0)*n,a.scaleX=si(t,"scaleX",1),a.scaleY=si(t,"scaleY",1),a.rotation=si(t,"rotation",0),a.width=t.width*n,a.height=t.height*n,a.sequence=r;let o=si(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,s);if(!i)return null;this.readVertices(t,i,t.vertexCount<<1);let r=si(t,"color",null);return r&&i.color.setFromString(r),i}case"mesh":case"linkedmesh":{let r=si(t,"path",s),a=this.readSequence(si(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,s,r,a);if(!o)return null;o.path=r;let l=si(t,"color",null);l&&o.color.setFromString(l),o.width=si(t,"width",0)*n,o.height=si(t,"height",0)*n,o.sequence=a;let h=si(t,"parent",null);if(h)return this.linkedMeshes.push(new $e(o,si(t,"skin",null),i,h,si(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=si(t,"edges",null),o.hullLength=2*si(t,"hull",0),o}case"path":{let i=this.attachmentLoader.newPathAttachment(e,s);if(!i)return null;i.closed=si(t,"closed",!1),i.constantSpeed=si(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,i,r<<1);let a=c.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*n;i.lengths=a;let o=si(t,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,s);if(!i)return null;i.x=si(t,"x",0)*n,i.y=si(t,"y",0)*n,i.rotation=si(t,"rotation",0);let r=si(t,"color",null);return r&&i.color.setFromString(r),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,s);if(!i)return null;let n=si(t,"end",null);n&&(i.endSlot=r.findSlot(n));let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=si(t,"color",null);return o&&i.color.setFromString(o),i}}return null}readSequence(t){if(null==t)return null;let e=new w(si(t,"count",0));return e.start=si(t,"start",1),e.digits=si(t,"digits",0),e.setupIndex=si(t,"setup",0),e}readVertices(t,e,i){let s=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let t=c.toFloatArray(r);if(1!=s)for(let e=0,i=r.length;e<i;e++)t[e]*=s;return void(e.vertices=t)}let n=new Array,a=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(r[t]),n.push(r[t+1]*s),n.push(r[t+2]*s),n.push(r[t+3])}e.bones=a,e.vertices=c.toFloatArray(n)}readAnimation(t,e,i){let s=this.scale,r=new Array;if(t.slots)for(let e in t.slots){let s=t.slots[e],a=i.findSlot(e);if(!a)throw new Error("Slot not found: "+e);let o=a.index;for(let t in s){let e=s[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new ht(i,o);for(let s=0;s<i;s++){let i=e[s];t.setFrame(s,si(i,"time",0),si(i,"name",null))}r.push(t)}else if("rgba"==t){let t=new rt(i,i<<2,o),s=e[0],a=si(s,"time",0),l=n.fromString(s.color);for(let i=0,r=0;;i++){t.setFrame(i,a,l.r,l.g,l.b,l.a);let o=e[i+1];if(!o){t.shrink(r);break}let h=si(o,"time",0),c=n.fromString(o.color),u=s.curve;u&&(r=ii(u,t,r,i,0,a,h,l.r,c.r,1),r=ii(u,t,r,i,1,a,h,l.g,c.g,1),r=ii(u,t,r,i,2,a,h,l.b,c.b,1),r=ii(u,t,r,i,3,a,h,l.a,c.a,1)),a=h,l=c,s=o}r.push(t)}else if("rgb"==t){let t=new nt(i,3*i,o),s=e[0],a=si(s,"time",0),l=n.fromString(s.color);for(let i=0,r=0;;i++){t.setFrame(i,a,l.r,l.g,l.b);let o=e[i+1];if(!o){t.shrink(r);break}let h=si(o,"time",0),c=n.fromString(o.color),u=s.curve;u&&(r=ii(u,t,r,i,0,a,h,l.r,c.r,1),r=ii(u,t,r,i,1,a,h,l.g,c.g,1),r=ii(u,t,r,i,2,a,h,l.b,c.b,1)),a=h,l=c,s=o}r.push(t)}else if("alpha"==t)r.push(ti(e,new at(i,i,o),0,1));else if("rgba2"==t){let t=new ot(i,7*i,o),s=e[0],a=si(s,"time",0),l=n.fromString(s.light),h=n.fromString(s.dark);for(let i=0,r=0;;i++){t.setFrame(i,a,l.r,l.g,l.b,l.a,h.r,h.g,h.b);let o=e[i+1];if(!o){t.shrink(r);break}let c=si(o,"time",0),u=n.fromString(o.light),d=n.fromString(o.dark),f=s.curve;f&&(r=ii(f,t,r,i,0,a,c,l.r,u.r,1),r=ii(f,t,r,i,1,a,c,l.g,u.g,1),r=ii(f,t,r,i,2,a,c,l.b,u.b,1),r=ii(f,t,r,i,3,a,c,l.a,u.a,1),r=ii(f,t,r,i,4,a,c,h.r,d.r,1),r=ii(f,t,r,i,5,a,c,h.g,d.g,1),r=ii(f,t,r,i,6,a,c,h.b,d.b,1)),a=c,l=u,h=d,s=o}r.push(t)}else if("rgb2"==t){let t=new lt(i,6*i,o),s=e[0],a=si(s,"time",0),l=n.fromString(s.light),h=n.fromString(s.dark);for(let i=0,r=0;;i++){t.setFrame(i,a,l.r,l.g,l.b,h.r,h.g,h.b);let o=e[i+1];if(!o){t.shrink(r);break}let c=si(o,"time",0),u=n.fromString(o.light),d=n.fromString(o.dark),f=s.curve;f&&(r=ii(f,t,r,i,0,a,c,l.r,u.r,1),r=ii(f,t,r,i,1,a,c,l.g,u.g,1),r=ii(f,t,r,i,2,a,c,l.b,u.b,1),r=ii(f,t,r,i,3,a,c,h.r,d.r,1),r=ii(f,t,r,i,4,a,c,h.g,d.g,1),r=ii(f,t,r,i,5,a,c,h.b,d.b,1)),a=c,l=u,h=d,s=o}r.push(t)}}}if(t.bones)for(let e in t.bones){let n=t.bones[e],a=i.findBone(e);if(!a)throw new Error("Bone not found: "+e);let o=a.index;for(let t in n){let e=n[t],i=e.length;if(0!=i)if("rotate"===t)r.push(ti(e,new H(i,i,o),0,1));else if("translate"===t){let t=new Z(i,i<<1,o);r.push(ei(e,t,"x","y",0,s))}else if("translatex"===t){let t=new K(i,i,o);r.push(ti(e,t,0,s))}else if("translatey"===t){let t=new J(i,i,o);r.push(ti(e,t,0,s))}else if("scale"===t){let t=new Q(i,i<<1,o);r.push(ei(e,t,"x","y",1,1))}else if("scalex"===t){let t=new $(i,i,o);r.push(ti(e,t,1,1))}else if("scaley"===t){let t=new tt(i,i,o);r.push(ti(e,t,1,1))}else if("shear"===t){let t=new et(i,i<<1,o);r.push(ei(e,t,"x","y",0,1))}else if("shearx"===t){let t=new it(i,i,o);r.push(ti(e,t,0,1))}else if("sheary"===t){let t=new st(i,i,o);r.push(ti(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let n=t.ik[e],a=n[0];if(!a)continue;let o=i.findIkConstraint(e);if(!o)throw new Error("IK Constraint not found: "+e);let l=i.ikConstraints.indexOf(o),h=new ft(n.length,n.length<<1,l),c=si(a,"time",0),u=si(a,"mix",1),d=si(a,"softness",0)*s;for(let t=0,e=0;;t++){h.setFrame(t,c,u,d,si(a,"bendPositive",!0)?1:-1,si(a,"compress",!1),si(a,"stretch",!1));let i=n[t+1];if(!i){h.shrink(e);break}let r=si(i,"time",0),o=si(i,"mix",1),l=si(i,"softness",0)*s,f=a.curve;f&&(e=ii(f,h,e,t,0,c,r,u,o,1),e=ii(f,h,e,t,1,c,r,d,l,s)),c=r,u=o,d=l,a=i}r.push(h)}if(t.transform)for(let e in t.transform){let s=t.transform[e],n=s[0];if(!n)continue;let a=i.findTransformConstraint(e);if(!a)throw new Error("Transform constraint not found: "+e);let o=i.transformConstraints.indexOf(a),l=new mt(s.length,6*s.length,o),h=si(n,"time",0),c=si(n,"mixRotate",1),u=si(n,"mixX",1),d=si(n,"mixY",u),f=si(n,"mixScaleX",1),m=si(n,"mixScaleY",f),g=si(n,"mixShearY",1);for(let t=0,e=0;;t++){l.setFrame(t,h,c,u,d,f,m,g);let i=s[t+1];if(!i){l.shrink(e);break}let r=si(i,"time",0),a=si(i,"mixRotate",1),o=si(i,"mixX",1),p=si(i,"mixY",o),x=si(i,"mixScaleX",1),w=si(i,"mixScaleY",x),b=si(i,"mixShearY",1),y=n.curve;y&&(e=ii(y,l,e,t,0,h,r,c,a,1),e=ii(y,l,e,t,1,h,r,u,o,1),e=ii(y,l,e,t,2,h,r,d,p,1),e=ii(y,l,e,t,3,h,r,f,x,1),e=ii(y,l,e,t,4,h,r,m,w,1),e=ii(y,l,e,t,5,h,r,g,b,1)),h=r,c=a,u=o,d=p,f=x,m=w,f=x,n=i}r.push(l)}if(t.path)for(let e in t.path){let n=t.path[e],a=i.findPathConstraint(e);if(!a)throw new Error("Path constraint not found: "+e);let o=i.pathConstraints.indexOf(a);for(let t in n){let e=n[t],i=e[0];if(!i)continue;let l=e.length;if("position"===t){let t=new gt(l,l,o);r.push(ti(e,t,0,a.positionMode==Vt.Fixed?s:1))}else if("spacing"===t){let t=new pt(l,l,o);r.push(ti(e,t,0,a.spacingMode==Ot.Length||a.spacingMode==Ot.Fixed?s:1))}else if("mix"===t){let t=new xt(l,3*l,o),s=si(i,"time",0),n=si(i,"mixRotate",1),a=si(i,"mixX",1),h=si(i,"mixY",a);for(let r=0,o=0;;r++){t.setFrame(r,s,n,a,h);let l=e[r+1];if(!l){t.shrink(o);break}let c=si(l,"time",0),u=si(l,"mixRotate",1),d=si(l,"mixX",1),f=si(l,"mixY",d),m=i.curve;m&&(o=ii(m,t,o,r,0,s,c,n,u,1),o=ii(m,t,o,r,1,s,c,a,d,1),o=ii(m,t,o,r,2,s,c,h,f,1)),s=c,n=u,a=d,h=f,i=l}r.push(t)}}}if(t.attachments)for(let e in t.attachments){let n=t.attachments[e],a=i.findSkin(e);if(!a)throw new Error("Skin not found: "+e);for(let t in n){let e=n[t],o=i.findSlot(t);if(!o)throw new Error("Slot not found: "+t);let l=o.index;for(let t in e){let i=e[t],n=a.getAttachment(l,t);for(let t in i){let e=i[t],a=e[0];if(a)if("deform"==t){let t=n.bones,i=n.vertices,o=t?i.length/3*2:i.length,h=new ct(e.length,e.length,l,n),u=si(a,"time",0);for(let r=0,n=0;;r++){let l,d=si(a,"vertices",null);if(d){l=c.newFloatArray(o);let e=si(a,"offset",0);if(c.arrayCopy(d,0,l,e,d.length),1!=s)for(let t=e,i=t+d.length;t<i;t++)l[t]*=s;if(!t)for(let t=0;t<o;t++)l[t]+=i[t]}else l=t?c.newFloatArray(o):i;h.setFrame(r,u,l);let f=e[r+1];if(!f){h.shrink(n);break}let m=si(f,"time",0),g=a.curve;g&&(n=ii(g,h,n,r,0,u,m,0,1,1)),u=m,a=f}r.push(h)}else if("sequence"==t){let t=new wt(e.length,l,n),i=0;for(let s=0;s<e.length;s++){let r=si(a,"delay",i),n=si(a,"time",0),o=b[si(a,"mode","hold")],l=si(a,"index",0);t.setFrame(s,n,o,l,r),i=r,a=e[s+1]}r.push(t)}}}}}if(t.drawOrder){let e=new dt(t.drawOrder.length),s=i.slots.length,n=0;for(let r=0;r<t.drawOrder.length;r++,n++){let a=t.drawOrder[r],o=null,l=si(a,"offsets",null);if(l){o=c.newArray(s,-1);let t=c.newArray(s-l.length,0),e=0,r=0;for(let s=0;s<l.length;s++){let n=l[s],a=i.findSlot(n.slot);if(!a)throw new Error("Slot not found: "+a);let h=a.index;for(;e!=h;)t[r++]=e++;o[e+n.offset]=e++}for(;e<s;)t[r++]=e++;for(let e=s-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(n,si(a,"time",0),o)}r.push(e)}if(t.events){let e=new ut(t.events.length),s=0;for(let r=0;r<t.events.length;r++,s++){let n=t.events[r],a=i.findEvent(n.name);if(!a)throw new Error("Event not found: "+n.name);let o=new ne(c.toSinglePrecision(si(n,"time",0)),a);o.intValue=si(n,"int",a.intValue),o.floatValue=si(n,"float",a.floatValue),o.stringValue=si(n,"string",a.stringValue),o.data.audioPath&&(o.volume=si(n,"volume",1),o.balance=si(n,"balance",0)),e.setFrame(s,o)}r.push(e)}let a=0;for(let t=0,e=r.length;t<e;t++)a=Math.max(a,r[t].getDuration());i.animations.push(new v(e,r,a))}}class $e{constructor(t,e,i,s,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}}function ti(t,e,i,s){let r=t[0],n=si(r,"time",0),a=si(r,"value",i)*s,o=0;for(let l=0;;l++){e.setFrame(l,n,a);let h=t[l+1];if(!h)return e.shrink(o),e;let c=si(h,"time",0),u=si(h,"value",i)*s;r.curve&&(o=ii(r.curve,e,o,l,0,n,c,a,u,s)),n=c,a=u,r=h}}function ei(t,e,i,s,r,n){let a=t[0],o=si(a,"time",0),l=si(a,i,r)*n,h=si(a,s,r)*n,c=0;for(let u=0;;u++){e.setFrame(u,o,l,h);let d=t[u+1];if(!d)return e.shrink(c),e;let f=si(d,"time",0),m=si(d,i,r)*n,g=si(d,s,r)*n,p=a.curve;p&&(c=ii(p,e,c,u,0,o,f,l,m,n),c=ii(p,e,c,u,1,o,f,h,g,n)),o=f,l=m,h=g,a=d}}function ii(t,e,i,s,r,n,a,o,l,h){if("stepped"==t)return e.setStepped(s),i;let c=r<<2,u=t[c],d=t[c+1]*h,f=t[c+2],m=t[c+3]*h;return e.setBezier(i,s,r,n,o,u,d,f,m,a,l),i+1}function si(t,e,i){return void 0!==t[e]?t[e]:i}var ri;void 0===Math.fround&&(Math.fround=(ri=new Float32Array(1),function(t){return ri[0]=t,ri[0]}))},716:function(t,e,i){i.r(e),i.d(e,{AlphaTimeline:function(){return s.AlphaTimeline},Animation:function(){return s.Animation},AnimationState:function(){return s.AnimationState},AnimationStateAdapter:function(){return s.AnimationStateAdapter},AnimationStateData:function(){return s.AnimationStateData},AssetManager:function(){return l},AssetManagerBase:function(){return s.AssetManagerBase},AtlasAttachmentLoader:function(){return s.AtlasAttachmentLoader},Attachment:function(){return s.Attachment},AttachmentTimeline:function(){return s.AttachmentTimeline},BinaryInput:function(){return s.BinaryInput},BlendMode:function(){return s.BlendMode},Bone:function(){return s.Bone},BoneData:function(){return s.BoneData},BoundingBoxAttachment:function(){return s.BoundingBoxAttachment},CURRENT:function(){return s.CURRENT},CameraController:function(){return F},ClippingAttachment:function(){return s.ClippingAttachment},Color:function(){return s.Color},Color2Attribute:function(){return V},ColorAttribute:function(){return D},ConstraintData:function(){return s.ConstraintData},CurveTimeline:function(){return s.CurveTimeline},CurveTimeline1:function(){return s.CurveTimeline1},CurveTimeline2:function(){return s.CurveTimeline2},DebugUtils:function(){return s.DebugUtils},DeformTimeline:function(){return s.DeformTimeline},Downloader:function(){return s.Downloader},DrawOrderTimeline:function(){return s.DrawOrderTimeline},Event:function(){return s.Event},EventData:function(){return s.EventData},EventQueue:function(){return s.EventQueue},EventTimeline:function(){return s.EventTimeline},EventType:function(){return s.EventType},FIRST:function(){return s.FIRST},FakeTexture:function(){return s.FakeTexture},GLTexture:function(){return o},HOLD_FIRST:function(){return s.HOLD_FIRST},HOLD_MIX:function(){return s.HOLD_MIX},HOLD_SUBSEQUENT:function(){return s.HOLD_SUBSEQUENT},IkConstraint:function(){return s.IkConstraint},IkConstraintData:function(){return s.IkConstraintData},IkConstraintTimeline:function(){return s.IkConstraintTimeline},Input:function(){return k},IntSet:function(){return s.IntSet},Interpolation:function(){return s.Interpolation},LoadingScreen:function(){return et},M00:function(){return c},M01:function(){return u},M02:function(){return d},M03:function(){return f},M10:function(){return m},M11:function(){return g},M12:function(){return p},M13:function(){return x},M20:function(){return w},M21:function(){return b},M22:function(){return y},M23:function(){return v},M30:function(){return A},M31:function(){return S},M32:function(){return T},M33:function(){return C},ManagedWebGLRenderingContext:function(){return r},MathUtils:function(){return s.MathUtils},Matrix4:function(){return M},Mesh:function(){return Y},MeshAttachment:function(){return s.MeshAttachment},MixBlend:function(){return s.MixBlend},MixDirection:function(){return s.MixDirection},OrthoCamera:function(){return I},PathAttachment:function(){return s.PathAttachment},PathConstraint:function(){return s.PathConstraint},PathConstraintData:function(){return s.PathConstraintData},PathConstraintMixTimeline:function(){return s.PathConstraintMixTimeline},PathConstraintPositionTimeline:function(){return s.PathConstraintPositionTimeline},PathConstraintSpacingTimeline:function(){return s.PathConstraintSpacingTimeline},PointAttachment:function(){return s.PointAttachment},PolygonBatcher:function(){return N},Pool:function(){return s.Pool},Position2Attribute:function(){return B},Position3Attribute:function(){return L},PositionMode:function(){return s.PositionMode},Pow:function(){return s.Pow},PowOut:function(){return s.PowOut},RGB2Timeline:function(){return s.RGB2Timeline},RGBA2Timeline:function(){return s.RGBA2Timeline},RGBATimeline:function(){return s.RGBATimeline},RGBTimeline:function(){return s.RGBTimeline},RegionAttachment:function(){return s.RegionAttachment},ResizeMode:function(){return K},RotateMode:function(){return s.RotateMode},RotateTimeline:function(){return s.RotateTimeline},SETUP:function(){return s.SETUP},SUBSEQUENT:function(){return s.SUBSEQUENT},ScaleTimeline:function(){return s.ScaleTimeline},ScaleXTimeline:function(){return s.ScaleXTimeline},ScaleYTimeline:function(){return s.ScaleYTimeline},SceneRenderer:function(){return Z},SequenceTimeline:function(){return s.SequenceTimeline},Shader:function(){return R},ShapeRenderer:function(){return W},ShapeType:function(){return U},ShearTimeline:function(){return s.ShearTimeline},ShearXTimeline:function(){return s.ShearXTimeline},ShearYTimeline:function(){return s.ShearYTimeline},Skeleton:function(){return s.Skeleton},SkeletonBinary:function(){return s.SkeletonBinary},SkeletonBounds:function(){return s.SkeletonBounds},SkeletonClipping:function(){return s.SkeletonClipping},SkeletonData:function(){return s.SkeletonData},SkeletonDebugRenderer:function(){return z},SkeletonJson:function(){return s.SkeletonJson},SkeletonRenderer:function(){return _},Skin:function(){return s.Skin},SkinEntry:function(){return s.SkinEntry},Slot:function(){return s.Slot},SlotData:function(){return s.SlotData},SpacingMode:function(){return s.SpacingMode},SpineCanvas:function(){return rt},StringSet:function(){return s.StringSet},TexCoordAttribute:function(){return P},Texture:function(){return s.Texture},TextureAtlas:function(){return s.TextureAtlas},TextureAtlasPage:function(){return s.TextureAtlasPage},TextureAtlasRegion:function(){return s.TextureAtlasRegion},TextureFilter:function(){return s.TextureFilter},TextureRegion:function(){return s.TextureRegion},TextureWrap:function(){return s.TextureWrap},TimeKeeper:function(){return s.TimeKeeper},Timeline:function(){return s.Timeline},Touch:function(){return E},TrackEntry:function(){return s.TrackEntry},TransformConstraint:function(){return s.TransformConstraint},TransformConstraintData:function(){return s.TransformConstraintData},TransformConstraintTimeline:function(){return s.TransformConstraintTimeline},TransformMode:function(){return s.TransformMode},TranslateTimeline:function(){return s.TranslateTimeline},TranslateXTimeline:function(){return s.TranslateXTimeline},TranslateYTimeline:function(){return s.TranslateYTimeline},Triangulator:function(){return s.Triangulator},Utils:function(){return s.Utils},Vector2:function(){return s.Vector2},Vector3:function(){return h},VertexAttachment:function(){return s.VertexAttachment},VertexAttribute:function(){return X},VertexAttributeType:function(){return O},WebGLBlendModeConverter:function(){return a},WindowedMean:function(){return s.WindowedMean}});var s=i(56);class r{constructor(t,e={alpha:"true"}){if(this.restorables=new Array,t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{let i=t;this.gl=i.getContext("webgl2",e)||i.getContext("webgl",e),this.canvas=i,i.addEventListener("webglcontextlost",(t=>{t&&t.preventDefault()})),i.addEventListener("webglcontextrestored",(t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()}))}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}}const n=771;class a{static getDestGLBlendMode(t){switch(t){case s.BlendMode.Normal:return n;case s.BlendMode.Additive:return 1;case s.BlendMode.Multiply:case s.BlendMode.Screen:return n;default:throw new Error("Unknown blend mode: "+t)}}static getSourceColorGLBlendMode(t,e=!1){switch(t){case s.BlendMode.Normal:case s.BlendMode.Additive:return e?1:770;case s.BlendMode.Multiply:return 774;case s.BlendMode.Screen:return 1;default:throw new Error("Unknown blend mode: "+t)}}static getSourceAlphaGLBlendMode(t){switch(t){case s.BlendMode.Normal:case s.BlendMode.Additive:return 1;case s.BlendMode.Multiply:return n;case s.BlendMode.Screen:return 769;default:throw new Error("Unknown blend mode: "+t)}}}class o extends s.Texture{constructor(t,e,i=!1){super(e),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.context=t instanceof r?t:new r(t),this.useMipMaps=i,this.restore(),this.context.addRestorable(this)}setFilters(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,o.validateMagFilter(e)),this.useMipMaps=o.usesMipMaps(t),this.useMipMaps&&i.generateMipmap(i.TEXTURE_2D)}static validateMagFilter(t){switch(t){case s.TextureFilter.MipMap:case s.TextureFilter.MipMapLinearLinear:case s.TextureFilter.MipMapLinearNearest:case s.TextureFilter.MipMapNearestLinear:case s.TextureFilter.MipMapNearestNearest:return s.TextureFilter.Linear;default:return t}}static usesMipMaps(t){switch(t){case s.TextureFilter.MipMap:case s.TextureFilter.MipMapLinearLinear:case s.TextureFilter.MipMapLinearNearest:case s.TextureFilter.MipMapNearestLinear:case s.TextureFilter.MipMapNearestNearest:return!0;default:return!1}}setWraps(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),o.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){let e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}}o.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;class l extends s.AssetManagerBase{constructor(t,e="",i=new s.Downloader){super((e=>new o(t,e)),e,i)}}class h{constructor(t=0,e=0,i=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[c]+this.y*e[u]+this.z*e[d]+e[f],this.x*e[m]+this.y*e[g]+this.z*e[p]+e[x],this.x*e[w]+this.y*e[b]+this.z*e[y]+e[v])}project(t){let e=t.values,i=1/(this.x*e[A]+this.y*e[S]+this.z*e[T]+e[C]);return this.set((this.x*e[c]+this.y*e[u]+this.z*e[d]+e[f])*i,(this.x*e[m]+this.y*e[g]+this.z*e[p]+e[x])*i,(this.x*e[w]+this.y*e[b]+this.z*e[y]+e[v])*i)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x,i=t.y-this.y,s=t.z-this.z;return Math.sqrt(e*e+i*i+s*s)}}const c=0,u=4,d=8,f=12,m=1,g=5,p=9,x=13,w=2,b=6,y=10,v=14,A=3,S=7,T=11,C=15;class M{constructor(){this.temp=new Float32Array(16),this.values=new Float32Array(16);let t=this.values;t[c]=1,t[g]=1,t[y]=1,t[C]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,e=this.values;return t[c]=e[c],t[u]=e[m],t[d]=e[w],t[f]=e[A],t[m]=e[u],t[g]=e[g],t[p]=e[b],t[x]=e[S],t[w]=e[d],t[b]=e[p],t[y]=e[y],t[v]=e[T],t[A]=e[f],t[S]=e[x],t[T]=e[v],t[C]=e[C],this.set(t)}identity(){let t=this.values;return t[c]=1,t[u]=0,t[d]=0,t[f]=0,t[m]=0,t[g]=1,t[p]=0,t[x]=0,t[w]=0,t[b]=0,t[y]=1,t[v]=0,t[A]=0,t[S]=0,t[T]=0,t[C]=1,this}invert(){let t=this.values,e=this.temp,i=t[A]*t[b]*t[p]*t[f]-t[w]*t[S]*t[p]*t[f]-t[A]*t[g]*t[y]*t[f]+t[m]*t[S]*t[y]*t[f]+t[w]*t[g]*t[T]*t[f]-t[m]*t[b]*t[T]*t[f]-t[A]*t[b]*t[d]*t[x]+t[w]*t[S]*t[d]*t[x]+t[A]*t[u]*t[y]*t[x]-t[c]*t[S]*t[y]*t[x]-t[w]*t[u]*t[T]*t[x]+t[c]*t[b]*t[T]*t[x]+t[A]*t[g]*t[d]*t[v]-t[m]*t[S]*t[d]*t[v]-t[A]*t[u]*t[p]*t[v]+t[c]*t[S]*t[p]*t[v]+t[m]*t[u]*t[T]*t[v]-t[c]*t[g]*t[T]*t[v]-t[w]*t[g]*t[d]*t[C]+t[m]*t[b]*t[d]*t[C]+t[w]*t[u]*t[p]*t[C]-t[c]*t[b]*t[p]*t[C]-t[m]*t[u]*t[y]*t[C]+t[c]*t[g]*t[y]*t[C];if(0==i)throw new Error("non-invertible matrix");let s=1/i;return e[c]=t[p]*t[v]*t[S]-t[x]*t[y]*t[S]+t[x]*t[b]*t[T]-t[g]*t[v]*t[T]-t[p]*t[b]*t[C]+t[g]*t[y]*t[C],e[u]=t[f]*t[y]*t[S]-t[d]*t[v]*t[S]-t[f]*t[b]*t[T]+t[u]*t[v]*t[T]+t[d]*t[b]*t[C]-t[u]*t[y]*t[C],e[d]=t[d]*t[x]*t[S]-t[f]*t[p]*t[S]+t[f]*t[g]*t[T]-t[u]*t[x]*t[T]-t[d]*t[g]*t[C]+t[u]*t[p]*t[C],e[f]=t[f]*t[p]*t[b]-t[d]*t[x]*t[b]-t[f]*t[g]*t[y]+t[u]*t[x]*t[y]+t[d]*t[g]*t[v]-t[u]*t[p]*t[v],e[m]=t[x]*t[y]*t[A]-t[p]*t[v]*t[A]-t[x]*t[w]*t[T]+t[m]*t[v]*t[T]+t[p]*t[w]*t[C]-t[m]*t[y]*t[C],e[g]=t[d]*t[v]*t[A]-t[f]*t[y]*t[A]+t[f]*t[w]*t[T]-t[c]*t[v]*t[T]-t[d]*t[w]*t[C]+t[c]*t[y]*t[C],e[p]=t[f]*t[p]*t[A]-t[d]*t[x]*t[A]-t[f]*t[m]*t[T]+t[c]*t[x]*t[T]+t[d]*t[m]*t[C]-t[c]*t[p]*t[C],e[x]=t[d]*t[x]*t[w]-t[f]*t[p]*t[w]+t[f]*t[m]*t[y]-t[c]*t[x]*t[y]-t[d]*t[m]*t[v]+t[c]*t[p]*t[v],e[w]=t[g]*t[v]*t[A]-t[x]*t[b]*t[A]+t[x]*t[w]*t[S]-t[m]*t[v]*t[S]-t[g]*t[w]*t[C]+t[m]*t[b]*t[C],e[b]=t[f]*t[b]*t[A]-t[u]*t[v]*t[A]-t[f]*t[w]*t[S]+t[c]*t[v]*t[S]+t[u]*t[w]*t[C]-t[c]*t[b]*t[C],e[y]=t[u]*t[x]*t[A]-t[f]*t[g]*t[A]+t[f]*t[m]*t[S]-t[c]*t[x]*t[S]-t[u]*t[m]*t[C]+t[c]*t[g]*t[C],e[v]=t[f]*t[g]*t[w]-t[u]*t[x]*t[w]-t[f]*t[m]*t[b]+t[c]*t[x]*t[b]+t[u]*t[m]*t[v]-t[c]*t[g]*t[v],e[A]=t[p]*t[b]*t[A]-t[g]*t[y]*t[A]-t[p]*t[w]*t[S]+t[m]*t[y]*t[S]+t[g]*t[w]*t[T]-t[m]*t[b]*t[T],e[S]=t[u]*t[y]*t[A]-t[d]*t[b]*t[A]+t[d]*t[w]*t[S]-t[c]*t[y]*t[S]-t[u]*t[w]*t[T]+t[c]*t[b]*t[T],e[T]=t[d]*t[g]*t[A]-t[u]*t[p]*t[A]-t[d]*t[m]*t[S]+t[c]*t[p]*t[S]+t[u]*t[m]*t[T]-t[c]*t[g]*t[T],e[C]=t[u]*t[p]*t[w]-t[d]*t[g]*t[w]+t[d]*t[m]*t[b]-t[c]*t[p]*t[b]-t[u]*t[m]*t[y]+t[c]*t[g]*t[y],t[c]=e[c]*s,t[u]=e[u]*s,t[d]=e[d]*s,t[f]=e[f]*s,t[m]=e[m]*s,t[g]=e[g]*s,t[p]=e[p]*s,t[x]=e[x]*s,t[w]=e[w]*s,t[b]=e[b]*s,t[y]=e[y]*s,t[v]=e[v]*s,t[A]=e[A]*s,t[S]=e[S]*s,t[T]=e[T]*s,t[C]=e[C]*s,this}determinant(){let t=this.values;return t[A]*t[b]*t[p]*t[f]-t[w]*t[S]*t[p]*t[f]-t[A]*t[g]*t[y]*t[f]+t[m]*t[S]*t[y]*t[f]+t[w]*t[g]*t[T]*t[f]-t[m]*t[b]*t[T]*t[f]-t[A]*t[b]*t[d]*t[x]+t[w]*t[S]*t[d]*t[x]+t[A]*t[u]*t[y]*t[x]-t[c]*t[S]*t[y]*t[x]-t[w]*t[u]*t[T]*t[x]+t[c]*t[b]*t[T]*t[x]+t[A]*t[g]*t[d]*t[v]-t[m]*t[S]*t[d]*t[v]-t[A]*t[u]*t[p]*t[v]+t[c]*t[S]*t[p]*t[v]+t[m]*t[u]*t[T]*t[v]-t[c]*t[g]*t[T]*t[v]-t[w]*t[g]*t[d]*t[C]+t[m]*t[b]*t[d]*t[C]+t[w]*t[u]*t[p]*t[C]-t[c]*t[b]*t[p]*t[C]-t[m]*t[u]*t[y]*t[C]+t[c]*t[g]*t[y]*t[C]}translate(t,e,i){let s=this.values;return s[f]+=t,s[x]+=e,s[v]+=i,this}copy(){return(new M).set(this.values)}projection(t,e,i,s){this.identity();let r=1/Math.tan(i*(Math.PI/180)/2),n=(e+t)/(t-e),a=2*e*t/(t-e),o=this.values;return o[c]=r/s,o[m]=0,o[w]=0,o[A]=0,o[u]=0,o[g]=r,o[b]=0,o[S]=0,o[d]=0,o[p]=0,o[y]=n,o[T]=-1,o[f]=0,o[x]=0,o[v]=a,o[C]=0,this}ortho2d(t,e,i,s){return this.ortho(t,t+i,e,e+s,0,1)}ortho(t,e,i,s,r,n){this.identity();let a=2/(e-t),o=2/(s-i),l=-2/(n-r),h=-(e+t)/(e-t),M=-(s+i)/(s-i),I=-(n+r)/(n-r),k=this.values;return k[c]=a,k[m]=0,k[w]=0,k[A]=0,k[u]=0,k[g]=o,k[b]=0,k[S]=0,k[d]=0,k[p]=0,k[y]=l,k[T]=0,k[f]=h,k[x]=M,k[v]=I,k[C]=1,this}multiply(t){let e=this.temp,i=this.values,s=t.values;return e[c]=i[c]*s[c]+i[u]*s[m]+i[d]*s[w]+i[f]*s[A],e[u]=i[c]*s[u]+i[u]*s[g]+i[d]*s[b]+i[f]*s[S],e[d]=i[c]*s[d]+i[u]*s[p]+i[d]*s[y]+i[f]*s[T],e[f]=i[c]*s[f]+i[u]*s[x]+i[d]*s[v]+i[f]*s[C],e[m]=i[m]*s[c]+i[g]*s[m]+i[p]*s[w]+i[x]*s[A],e[g]=i[m]*s[u]+i[g]*s[g]+i[p]*s[b]+i[x]*s[S],e[p]=i[m]*s[d]+i[g]*s[p]+i[p]*s[y]+i[x]*s[T],e[x]=i[m]*s[f]+i[g]*s[x]+i[p]*s[v]+i[x]*s[C],e[w]=i[w]*s[c]+i[b]*s[m]+i[y]*s[w]+i[v]*s[A],e[b]=i[w]*s[u]+i[b]*s[g]+i[y]*s[b]+i[v]*s[S],e[y]=i[w]*s[d]+i[b]*s[p]+i[y]*s[y]+i[v]*s[T],e[v]=i[w]*s[f]+i[b]*s[x]+i[y]*s[v]+i[v]*s[C],e[A]=i[A]*s[c]+i[S]*s[m]+i[T]*s[w]+i[C]*s[A],e[S]=i[A]*s[u]+i[S]*s[g]+i[T]*s[b]+i[C]*s[S],e[T]=i[A]*s[d]+i[S]*s[p]+i[T]*s[y]+i[C]*s[T],e[C]=i[A]*s[f]+i[S]*s[x]+i[T]*s[v]+i[C]*s[C],this.set(this.temp)}multiplyLeft(t){let e=this.temp,i=this.values,s=t.values;return e[c]=s[c]*i[c]+s[u]*i[m]+s[d]*i[w]+s[f]*i[A],e[u]=s[c]*i[u]+s[u]*i[g]+s[d]*i[b]+s[f]*i[S],e[d]=s[c]*i[d]+s[u]*i[p]+s[d]*i[y]+s[f]*i[T],e[f]=s[c]*i[f]+s[u]*i[x]+s[d]*i[v]+s[f]*i[C],e[m]=s[m]*i[c]+s[g]*i[m]+s[p]*i[w]+s[x]*i[A],e[g]=s[m]*i[u]+s[g]*i[g]+s[p]*i[b]+s[x]*i[S],e[p]=s[m]*i[d]+s[g]*i[p]+s[p]*i[y]+s[x]*i[T],e[x]=s[m]*i[f]+s[g]*i[x]+s[p]*i[v]+s[x]*i[C],e[w]=s[w]*i[c]+s[b]*i[m]+s[y]*i[w]+s[v]*i[A],e[b]=s[w]*i[u]+s[b]*i[g]+s[y]*i[b]+s[v]*i[S],e[y]=s[w]*i[d]+s[b]*i[p]+s[y]*i[y]+s[v]*i[T],e[v]=s[w]*i[f]+s[b]*i[x]+s[y]*i[v]+s[v]*i[C],e[A]=s[A]*i[c]+s[S]*i[m]+s[T]*i[w]+s[C]*i[A],e[S]=s[A]*i[u]+s[S]*i[g]+s[T]*i[b]+s[C]*i[S],e[T]=s[A]*i[d]+s[S]*i[p]+s[T]*i[y]+s[C]*i[T],e[C]=s[A]*i[f]+s[S]*i[x]+s[T]*i[v]+s[C]*i[C],this.set(this.temp)}lookAt(t,e,i){let s=M.xAxis,r=M.yAxis,n=M.zAxis;n.setFrom(e).normalize(),s.setFrom(e).normalize(),s.cross(i).normalize(),r.setFrom(s).cross(n).normalize(),this.identity();let a=this.values;return a[c]=s.x,a[u]=s.y,a[d]=s.z,a[m]=r.x,a[g]=r.y,a[p]=r.z,a[w]=-n.x,a[b]=-n.y,a[y]=-n.z,M.tmpMatrix.identity(),M.tmpMatrix.values[f]=-t.x,M.tmpMatrix.values[x]=-t.y,M.tmpMatrix.values[v]=-t.z,this.multiply(M.tmpMatrix),this}}M.xAxis=new h,M.yAxis=new h,M.zAxis=new h,M.tmpMatrix=new M;class I{constructor(t,e){this.position=new h(0,0,0),this.direction=new h(0,0,-1),this.up=new h(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new M,this.inverseProjectionView=new M,this.projection=new M,this.view=new M,this.viewportWidth=t,this.viewportHeight=e,this.update()}update(){let t=this.projection,e=this.view,i=this.projectionView,s=this.inverseProjectionView,r=this.zoom,n=this.viewportWidth,a=this.viewportHeight;t.ortho(r*(-n/2),r*(n/2),r*(-a/2),r*(a/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),i.set(t.values),i.multiply(e),s.set(i.values).invert()}screenToWorld(t,e,i){let s=t.x,r=i-t.y-1;return t.x=2*s/e-1,t.y=2*r/i-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,i){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=i*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}}class k{constructor(t){this.mouseX=0,this.mouseY=0,this.buttonDown=!1,this.touch0=null,this.touch1=null,this.initialPinchDistance=0,this.listeners=new Array,this.eventListeners=[],this.element=t,this.setupCallbacks(t)}setupCallbacks(t){let e=e=>{if(e instanceof MouseEvent){let i=t.getBoundingClientRect();this.mouseX=e.clientX-i.left,this.mouseY=e.clientY-i.top,this.listeners.map((t=>{this.buttonDown?t.dragged&&t.dragged(this.mouseX,this.mouseY):t.moved&&t.moved(this.mouseX,this.mouseY)}))}},i=s=>{if(s instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=s.clientX-r.left,this.mouseY=s.clientY-r.top,this.buttonDown=!1,this.listeners.map((t=>{t.up&&t.up(this.mouseX,this.mouseY)})),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}};t.addEventListener("mousedown",(s=>{if(s instanceof MouseEvent){let r=t.getBoundingClientRect();this.mouseX=s.clientX-r.left,this.mouseY=s.clientY-r.top,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.mouseX,this.mouseY)})),document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}),!0),t.addEventListener("mousemove",e,!0),t.addEventListener("mouseup",i,!0),t.addEventListener("wheel",(t=>{t.preventDefault();let e=t.deltaY;t.deltaMode==WheelEvent.DOM_DELTA_LINE&&(e*=8),t.deltaMode==WheelEvent.DOM_DELTA_PAGE&&(e*=24),this.listeners.map((e=>{e.wheel&&e.wheel(t.deltaY)}))}),!0),t.addEventListener("touchstart",(e=>{if(!this.touch0||!this.touch1){let i=e.changedTouches.item(0);if(!i)return;let s=t.getBoundingClientRect(),r=i.clientX-s.left,n=i.clientY-s.top,a=new E(i.identifier,r,n);if(this.mouseX=r,this.mouseY=n,this.buttonDown=!0,this.touch0){if(!this.touch1){this.touch1=a;let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(t*t+e*e),this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,this.initialPinchDistance)}))}}else this.touch0=a,this.listeners.map((t=>{t.down&&t.down(a.x,a.y)}))}e.preventDefault()}),!1),t.addEventListener("touchmove",(e=>{if(this.touch0){var i=e.changedTouches;let n=t.getBoundingClientRect();for(var s=0;s<i.length;s++){var r=i[s];let t=r.clientX-n.left,e=r.clientY-n.top;this.touch0.identifier===r.identifier&&(this.touch0.x=this.mouseX=t,this.touch0.y=this.mouseY=e,this.listeners.map((i=>{i.dragged&&i.dragged(t,e)}))),this.touch1&&this.touch1.identifier===r.identifier&&(this.touch1.x=this.mouseX=t,this.touch1.y=this.mouseY=e)}if(this.touch0&&this.touch1){let t=this.touch1.x-this.touch0.x,e=this.touch1.x-this.touch0.x,i=Math.sqrt(t*t+e*e);this.listeners.map((t=>{t.zoom&&t.zoom(this.initialPinchDistance,i)}))}}e.preventDefault()}),!1);let s=e=>{if(this.touch0){var i=e.changedTouches;let n=t.getBoundingClientRect();for(var s=0;s<i.length;s++){var r=i[s];let t=r.clientX-n.left,e=r.clientY-n.top;if(this.touch0.identifier===r.identifier){if(this.touch0=null,this.mouseX=t,this.mouseY=e,this.listeners.map((i=>{i.up&&i.up(t,e)})),!this.touch1){this.buttonDown=!1;break}this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map((t=>{t.down&&t.down(this.touch0.x,this.touch0.y)}))}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}e.preventDefault()};t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",s)}addListener(t){this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>-1&&this.listeners.splice(e,1)}}class E{constructor(t,e,i){this.identifier=t,this.x=e,this.y=i}}class F{constructor(t,e){this.canvas=t,this.camera=e;let i=0,s=0,r=0,n=0,a=0,o=0,l=0;new k(t).addListener({down:(t,h)=>{i=e.position.x,s=e.position.y,r=a=t,n=o=h,l=e.zoom},dragged:(l,c)=>{let u=l-r,d=c-n,f=e.screenToWorld(new h(0,0),t.clientWidth,t.clientHeight),m=e.screenToWorld(new h(u,d),t.clientWidth,t.clientHeight).sub(f);e.position.set(i-m.x,s-m.y,0),e.update(),a=l,o=c},wheel:i=>{let s=i/200*e.zoom,r=e.zoom+s;if(r>0){let s=0,n=0;if(i<0)s=a,n=o;else{let e=new h(t.clientWidth/2+15,t.clientHeight/2),i=a-e.x,r=t.clientHeight-1-o-e.y;s=e.x-i,n=t.clientHeight-1-e.y+r}let l=e.screenToWorld(new h(s,n),t.clientWidth,t.clientHeight);e.zoom=r,e.update();let c=e.screenToWorld(new h(s,n),t.clientWidth,t.clientHeight);e.position.add(l.sub(c)),e.update()}},zoom:(t,i)=>{let s=t/i;e.zoom=l*s},up:(t,e)=>{a=t,o=e},moved:(t,e)=>{a=t,o=e}})}}class R{constructor(t,e,i){this.vertexShader=e,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=e,this.fsSource=i,this.context=t instanceof r?t:new r(t),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){let i=this.context.gl,s=i.createShader(t);if(!s)throw new Error("Couldn't create shader.");if(i.shaderSource(s,e),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS)){let t="Couldn't compile shader: "+i.getShaderInfoLog(s);if(i.deleteShader(s),!i.isContextLost())throw new Error(t)}return s}compileProgram(t,e){let i=this.context.gl,s=i.createProgram();if(!s)throw new Error("Couldn't compile program.");if(i.attachShader(s,t),i.attachShader(s,e),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS)){let t="Couldn't compile shader program: "+i.getProgramInfoLog(s);if(i.deleteProgram(s),!i.isContextLost())throw new Error(t)}return s}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,i){this.context.gl.uniform2f(this.getUniformLocation(t),e,i)}setUniform3f(t,e,i,s){this.context.gl.uniform3f(this.getUniformLocation(t),e,i,s)}setUniform4f(t,e,i,s,r){this.context.gl.uniform4f(this.getUniformLocation(t),e,i,s,r)}setUniform2x2f(t,e){let i=this.context.gl;this.tmp2x2.set(e),i.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let i=this.context.gl;this.tmp3x3.set(e),i.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let i=this.context.gl;this.tmp4x4.set(e),i.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=e.getUniformLocation(this.program,t);if(!i&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return i}getAttributeLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=e.getAttribLocation(this.program,t);if(-1==i&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return i}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e=`\n\t\t\t\tattribute vec4 ${R.POSITION};\n\t\t\t\tattribute vec4 ${R.COLOR};\n\t\t\t\tattribute vec2 ${R.TEXCOORDS};\n\t\t\t\tuniform mat4 ${R.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${R.COLOR};\n\t\t\t\t\tv_texCoords = ${R.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${R.MVP_MATRIX} * ${R.POSITION};\n\t\t\t\t}\n\t\t\t`;return new R(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")}static newTwoColoredTextured(t){let e=`\n\t\t\t\tattribute vec4 ${R.POSITION};\n\t\t\t\tattribute vec4 ${R.COLOR};\n\t\t\t\tattribute vec4 ${R.COLOR2};\n\t\t\t\tattribute vec2 ${R.TEXCOORDS};\n\t\t\t\tuniform mat4 ${R.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ${R.COLOR};\n\t\t\t\t\tv_dark = ${R.COLOR2};\n\t\t\t\t\tv_texCoords = ${R.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${R.MVP_MATRIX} * ${R.POSITION};\n\t\t\t\t}\n\t\t\t`;return new R(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")}static newColored(t){let e=`\n\t\t\t\tattribute vec4 ${R.POSITION};\n\t\t\t\tattribute vec4 ${R.COLOR};\n\t\t\t\tuniform mat4 ${R.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${R.COLOR};\n\t\t\t\t\tgl_Position = ${R.MVP_MATRIX} * ${R.POSITION};\n\t\t\t\t}\n\t\t\t`;return new R(t,e,"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")}}R.MVP_MATRIX="u_projTrans",R.POSITION="a_position",R.COLOR="a_color",R.COLOR2="a_color2",R.TEXCOORDS="a_texCoords",R.SAMPLER="u_texture";class Y{constructor(t,e,i,s){this.attributes=e,this.verticesBuffer=null,this.verticesLength=0,this.dirtyVertices=!1,this.indicesBuffer=null,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=t instanceof r?t:new r(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(s),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,i,s){let r=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?r.drawElements(e,s,r.UNSIGNED_SHORT,2*i):r.drawArrays(e,i,s),this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let s=0;s<this.attributes.length;s++){let r=this.attributes[s],n=t.getAttributeLocation(r.name);e.enableVertexAttribArray(n),e.vertexAttribPointer(n,r.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*i),i+=r.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let e=this.context.gl;for(let i=0;i<this.attributes.length;i++){let s=this.attributes[i],r=t.getAttributeLocation(s.name);e.disableVertexAttribArray(r)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}class X{constructor(t,e,i){this.name=t,this.type=e,this.numElements=i}}class B extends X{constructor(){super(R.POSITION,O.Float,2)}}class L extends X{constructor(){super(R.POSITION,O.Float,3)}}class P extends X{constructor(t=0){super(R.TEXCOORDS+(0==t?"":t),O.Float,2)}}class D extends X{constructor(){super(R.COLOR,O.Float,4)}}class V extends X{constructor(){super(R.COLOR2,O.Float,4)}}var O,U;!function(t){t[t.Float=0]="Float"}(O||(O={}));class N{constructor(t,e=!0,i=10920){if(this.drawCalls=0,this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.cullWasEnabled=!1,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=t instanceof r?t:new r(t);let s=e?[new B,new D,new P,new V]:[new B,new D,new P];this.mesh=new Y(t,s,i,3*i);let n=this.context.gl;this.srcColorBlend=n.SRC_ALPHA,this.srcAlphaBlend=n.ONE,this.dstBlend=n.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE)}setBlendMode(t,e,i){if((this.srcColorBlend!=t||this.srcAlphaBlend!=e||this.dstBlend!=i)&&(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing)){this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i)}}draw(t,e,i){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let s=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let r=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<i.length;t++,e++)r[t]=i[e]+s;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND),this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose()}}class W{constructor(t,e=10920){if(this.isDrawing=!1,this.shapeType=U.Filled,this.color=new s.Color(1,1,1,1),this.shader=null,this.vertexIndex=0,this.tmp=new s.Vector2,e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof r?t:new r(t),this.mesh=new Y(t,[new B,new D],e,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,i){if(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing){this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i)}}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,i,s){this.color.set(t,e,i,s)}point(t,e,i){this.check(U.Point,1),i||(i=this.color),this.vertex(t,e,i)}line(t,e,i,s,r){this.check(U.Line,2);this.mesh.getVertices(),this.vertexIndex;r||(r=this.color),this.vertex(t,e,r),this.vertex(i,s,r)}triangle(t,e,i,s,r,n,a,o,l,h){this.check(t?U.Filled:U.Line,3);this.mesh.getVertices(),this.vertexIndex;o||(o=this.color),l||(l=this.color),h||(h=this.color),t?(this.vertex(e,i,o),this.vertex(s,r,l),this.vertex(n,a,h)):(this.vertex(e,i,o),this.vertex(s,r,l),this.vertex(s,r,o),this.vertex(n,a,l),this.vertex(n,a,o),this.vertex(e,i,l))}quad(t,e,i,s,r,n,a,o,l,h,c,u,d){this.check(t?U.Filled:U.Line,3);this.mesh.getVertices(),this.vertexIndex;h||(h=this.color),c||(c=this.color),u||(u=this.color),d||(d=this.color),t?(this.vertex(e,i,h),this.vertex(s,r,c),this.vertex(n,a,u),this.vertex(n,a,u),this.vertex(o,l,d),this.vertex(e,i,h)):(this.vertex(e,i,h),this.vertex(s,r,c),this.vertex(s,r,c),this.vertex(n,a,u),this.vertex(n,a,u),this.vertex(o,l,d),this.vertex(o,l,d),this.vertex(e,i,h))}rect(t,e,i,s,r,n){this.quad(t,e,i,e+s,i,e+s,i+r,e,i+r,n,n,n,n)}rectLine(t,e,i,s,r,n,a){this.check(t?U.Filled:U.Line,8),a||(a=this.color);let o=this.tmp.set(r-i,e-s);o.normalize(),n*=.5;let l=o.x*n,h=o.y*n;t?(this.vertex(e+l,i+h,a),this.vertex(e-l,i-h,a),this.vertex(s+l,r+h,a),this.vertex(s-l,r-h,a),this.vertex(s+l,r+h,a),this.vertex(e-l,i-h,a)):(this.vertex(e+l,i+h,a),this.vertex(e-l,i-h,a),this.vertex(s+l,r+h,a),this.vertex(s-l,r-h,a),this.vertex(s+l,r+h,a),this.vertex(e+l,i+h,a),this.vertex(s-l,r-h,a),this.vertex(e-l,i-h,a))}x(t,e,i){this.line(t-i,e-i,t+i,e+i),this.line(t-i,e+i,t+i,e-i)}polygon(t,e,i,s){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(U.Line,2*i),s||(s=this.color);this.mesh.getVertices(),this.vertexIndex;i<<=1;let r=t[e<<=1],n=t[e+1],a=e+i;for(let o=e,l=e+i-2;o<l;o+=2){let e=t[o],i=t[o+1],l=0,h=0;o+2>=a?(l=r,h=n):(l=t[o+2],h=t[o+3]),this.vertex(e,i,s),this.vertex(l,h,s)}}circle(t,e,i,r,n,a=0){if(0==a&&(a=Math.max(1,6*s.MathUtils.cbrt(r)|0)),a<=0)throw new Error("segments must be > 0.");n||(n=this.color);let o=2*s.MathUtils.PI/a,l=Math.cos(o),h=Math.sin(o),c=r,u=0;if(t){this.check(U.Filled,3*a+3),a--;for(let t=0;t<a;t++){this.vertex(e,i,n),this.vertex(e+c,i+u,n);let t=c;c=l*c-h*u,u=h*t+l*u,this.vertex(e+c,i+u,n)}this.vertex(e,i,n),this.vertex(e+c,i+u,n)}else{this.check(U.Line,2*a+2);for(let t=0;t<a;t++){this.vertex(e+c,i+u,n);let t=c;c=l*c-h*u,u=h*t+l*u,this.vertex(e+c,i+u,n)}this.vertex(e+c,i+u,n)}c=r,u=0,this.vertex(e+c,i+u,n)}curve(t,e,i,s,r,n,a,o,l,h){this.check(U.Line,2*l+2),h||(h=this.color);let c=1/l,u=c*c,d=c*c*c,f=3*c,m=3*u,g=6*u,p=6*d,x=t-2*i+r,w=e-2*s+n,b=3*(i-r)-t+a,y=3*(s-n)-e+o,v=t,A=e,S=(i-t)*f+x*m+b*d,T=(s-e)*f+w*m+y*d,C=x*g+b*p,M=w*g+y*p,I=b*p,k=y*p;for(;l-- >0;)this.vertex(v,A,h),v+=S,A+=T,S+=C,T+=M,C+=I,M+=k,this.vertex(v,A,h);this.vertex(v,A,h),this.vertex(a,o,h)}vertex(t,e,i){let s=this.vertexIndex,r=this.mesh.getVertices();r[s++]=t,r[s++]=e,r[s++]=i.r,r[s++]=i.g,r[s++]=i.b,r[s++]=i.a,this.vertexIndex=s}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}}!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(U||(U={}));class z{constructor(t){this.boneLineColor=new s.Color(1,0,0,1),this.boneOriginColor=new s.Color(0,1,0,1),this.attachmentLineColor=new s.Color(0,0,1,.5),this.triangleLineColor=new s.Color(1,.64,0,.5),this.pathColor=(new s.Color).setFromString("FF7F00"),this.clipColor=new s.Color(.8,0,0,2),this.aabbColor=new s.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new s.SkeletonBounds,this.temp=new Array,this.vertices=s.Utils.newFloatArray(2048),this.context=t instanceof r?t:new r(t)}draw(t,e,i){let r=e.x,n=e.y,a=this.context.gl,o=this.premultipliedAlpha?a.ONE:a.SRC_ALPHA;t.setBlendMode(o,a.ONE,a.ONE_MINUS_SRC_ALPHA);let l=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,s=l.length;e<s;e++){let s=l[e];if(i&&i.indexOf(s.data.name)>-1)continue;if(!s.parent)continue;let r=s.data.length*s.a+s.worldX,n=s.data.length*s.c+s.worldY;t.rectLine(!0,s.worldX,s.worldY,r,n,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(r,n,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let i=e.slots;for(let e=0,r=i.length;e<r;e++){let r=i[e],n=r.getAttachment();if(n instanceof s.RegionAttachment){let e=n,i=this.vertices;e.computeWorldVertices(r,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=e.slots;for(let e=0,r=i.length;e<r;e++){let r=i[e];if(!r.bone.active)continue;let n=r.getAttachment();if(!(n instanceof s.MeshAttachment))continue;let a=n,o=this.vertices;a.computeWorldVertices(r,0,a.worldVerticesLength,o,0,2);let l=a.triangles,h=a.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,i=l.length;e<i;e+=3){let i=2*l[e],s=2*l[e+1],r=2*l[e+2];t.triangle(!1,o[i],o[i+1],o[s],o[s+1],o[r],o[r+1])}}if(this.drawMeshHull&&h>0){t.setColor(this.attachmentLineColor),h=2*(h>>1);let e=o[h-2],i=o[h-1];for(let s=0,r=h;s<r;s+=2){let r=o[s],n=o[s+1];t.line(r,n,e,i),e=r,i=n}}}}if(this.drawBoundingBoxes){let i=this.bounds;i.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,i.minX,i.minY,i.getWidth(),i.getHeight());let s=i.polygons,r=i.boundingBoxes;for(let e=0,i=s.length;e<i;e++){let i=s[e];t.setColor(r[e].color),t.polygon(i,0,i.length)}}if(this.drawPaths){let i=e.slots;for(let e=0,r=i.length;e<r;e++){let r=i[e];if(!r.bone.active)continue;let n=r.getAttachment();if(!(n instanceof s.PathAttachment))continue;let a=n,o=a.worldVerticesLength,l=this.temp=s.Utils.setArraySize(this.temp,o,0);a.computeWorldVertices(r,0,o,l,0,2);let h=this.pathColor,c=l[2],u=l[3],d=0,f=0;if(a.closed){t.setColor(h);let e=l[0],i=l[1],s=l[o-2],r=l[o-1];d=l[o-4],f=l[o-3],t.curve(c,u,e,i,s,r,d,f,32),t.setColor(z.LIGHT_GRAY),t.line(c,u,e,i),t.line(d,f,s,r)}o-=4;for(let e=4;e<o;e+=6){let i=l[e],s=l[e+1],r=l[e+2],n=l[e+3];d=l[e+4],f=l[e+5],t.setColor(h),t.curve(c,u,i,s,r,n,d,f,32),t.setColor(z.LIGHT_GRAY),t.line(c,u,i,s),t.line(d,f,r,n),c=d,u=f}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,s=l.length;e<s;e++){let s=l[e];i&&i.indexOf(s.data.name)>-1||t.circle(!0,s.worldX,s.worldY,3*this.scale,z.GREEN,8)}}if(this.drawClipping){let i=e.slots;t.setColor(this.clipColor);for(let e=0,r=i.length;e<r;e++){let r=i[e];if(!r.bone.active)continue;let n=r.getAttachment();if(!(n instanceof s.ClippingAttachment))continue;let a=n,o=a.worldVerticesLength,l=this.temp=s.Utils.setArraySize(this.temp,o,0);a.computeWorldVertices(r,0,o,l,0,2);for(let e=0,i=l.length;e<i;e+=2){let i=l[e],s=l[e+1],r=l[(e+2)%l.length],n=l[(e+3)%l.length];t.line(i,s,r,n)}}}}dispose(){}}z.LIGHT_GRAY=new s.Color(192/255,192/255,192/255,1),z.GREEN=new s.Color(0,1,0,1);class q{constructor(t,e,i){this.vertices=t,this.numVertices=e,this.numFloats=i}}class _{constructor(t,e=!0){this.premultipliedAlpha=!1,this.tempColor=new s.Color,this.tempColor2=new s.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new q([],0,0),this.clipper=new s.SkeletonClipping,this.temp=new s.Vector2,this.temp2=new s.Vector2,this.temp3=new s.Color,this.temp4=new s.Color,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=s.Utils.newFloatArray(1024*this.vertexSize)}draw(t,e,i=-1,r=-1){let n,o,l,h=this.clipper,c=this.premultipliedAlpha,u=this.twoColorTint,d=null,f=(this.temp,this.temp2,this.temp3,this.temp4,this.renderable),m=e.drawOrder,g=e.color,p=u?12:8,x=!1;-1==i&&(x=!0);for(let e=0,w=m.length;e<w;e++){let w=h.isClipping()?2:p,b=m[e];if(!b.bone.active){h.clipEndWithSlot(b);continue}if(i>=0&&i==b.data.index&&(x=!0),!x){h.clipEndWithSlot(b);continue}r>=0&&r==b.data.index&&(x=!1);let y,v=b.getAttachment();if(v instanceof s.RegionAttachment){let t=v;f.vertices=this.vertices,f.numVertices=4,f.numFloats=w<<2,t.computeWorldVertices(b,f.vertices,0,w),o=_.QUAD_TRIANGLES,n=t.uvs,y=t.region.renderObject.page.texture,l=t.color}else{if(!(v instanceof s.MeshAttachment)){if(v instanceof s.ClippingAttachment){let t=v;h.clipStart(b,t);continue}h.clipEndWithSlot(b);continue}{let t=v;f.vertices=this.vertices,f.numVertices=t.worldVerticesLength>>1,f.numFloats=f.numVertices*w,f.numFloats>f.vertices.length&&(f.vertices=this.vertices=s.Utils.newFloatArray(f.numFloats)),t.computeWorldVertices(b,0,t.worldVerticesLength,f.vertices,0,w),o=t.triangles,y=t.region.renderObject.page.texture,n=t.uvs,l=t.color}}if(y){let e=b.color,i=this.tempColor;i.r=g.r*e.r*l.r,i.g=g.g*e.g*l.g,i.b=g.b*e.b*l.b,i.a=g.a*e.a*l.a,c&&(i.r*=i.a,i.g*=i.a,i.b*=i.a);let s=this.tempColor2;b.darkColor?(c?(s.r=b.darkColor.r*i.a,s.g=b.darkColor.g*i.a,s.b=b.darkColor.b*i.a):s.setFromColor(b.darkColor),s.a=c?1:0):s.set(0,0,0,1);let r=b.data.blendMode;if(r!=d&&(d=r,t.setBlendMode(a.getSourceColorGLBlendMode(d,c),a.getSourceAlphaGLBlendMode(d),a.getDestGLBlendMode(d))),h.isClipping()){h.clipTriangles(f.vertices,f.numFloats,o,o.length,n,i,s,u);let e=new Float32Array(h.clippedVertices),r=h.clippedTriangles;t.draw(y,e,r)}else{let e=f.vertices;if(u)for(let t=2,r=0,a=f.numFloats;t<a;t+=p,r+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=n[r],e[t+5]=n[r+1],e[t+6]=s.r,e[t+7]=s.g,e[t+8]=s.b,e[t+9]=s.a;else for(let t=2,s=0,r=f.numFloats;t<r;t+=p,s+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=n[s],e[t+5]=n[s+1];let r=f.vertices.subarray(0,f.numFloats);t.draw(y,r,o)}}h.clipEndWithSlot(b)}h.clipEnd()}}_.QUAD_TRIANGLES=[0,1,2,2,3,0];const j=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],G=[0,1,2,2,3,0],H=new s.Color(1,1,1,1);class Z{constructor(t,e,i=!0){this.twoColorTint=!1,this.activeRenderer=null,this.canvas=t,this.context=e instanceof r?e:new r(e),this.twoColorTint=i,this.camera=new I(t.width,t.height),this.batcherShader=i?R.newTwoColoredTextured(this.context):R.newColoredTextured(this.context),this.batcher=new N(this.context,i),this.shapesShader=R.newColored(this.context),this.shapes=new W(this.context),this.skeletonRenderer=new _(this.context,i),this.skeletonDebugRenderer=new z(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,i=-1,s=-1){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,i,s)}drawSkeletonDebug(t,e=!1,i){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,i)}drawTexture(t,e,i,s,r,n){this.enableRenderer(this.batcher),n||(n=H);var a=0;j[a++]=e,j[a++]=i,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=0,j[a++]=1,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a++]=0),j[a++]=e+s,j[a++]=i,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=1,j[a++]=1,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a++]=0),j[a++]=e+s,j[a++]=i+r,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=1,j[a++]=0,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a++]=0),j[a++]=e,j[a++]=i+r,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=0,j[a++]=0,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a]=0),this.batcher.draw(t,j,G)}drawTextureUV(t,e,i,s,r,n,a,o,l,h){this.enableRenderer(this.batcher),h||(h=H);var c=0;j[c++]=e,j[c++]=i,j[c++]=h.r,j[c++]=h.g,j[c++]=h.b,j[c++]=h.a,j[c++]=n,j[c++]=a,this.twoColorTint&&(j[c++]=0,j[c++]=0,j[c++]=0,j[c++]=0),j[c++]=e+s,j[c++]=i,j[c++]=h.r,j[c++]=h.g,j[c++]=h.b,j[c++]=h.a,j[c++]=o,j[c++]=a,this.twoColorTint&&(j[c++]=0,j[c++]=0,j[c++]=0,j[c++]=0),j[c++]=e+s,j[c++]=i+r,j[c++]=h.r,j[c++]=h.g,j[c++]=h.b,j[c++]=h.a,j[c++]=o,j[c++]=l,this.twoColorTint&&(j[c++]=0,j[c++]=0,j[c++]=0,j[c++]=0),j[c++]=e,j[c++]=i+r,j[c++]=h.r,j[c++]=h.g,j[c++]=h.b,j[c++]=h.a,j[c++]=n,j[c++]=l,this.twoColorTint&&(j[c++]=0,j[c++]=0,j[c++]=0,j[c]=0),this.batcher.draw(t,j,G)}drawTextureRotated(t,e,i,r,n,a,o,l,h){this.enableRenderer(this.batcher),h||(h=H);let c=e+a,u=i+o,d=-a,f=-o,m=r-a,g=n-o,p=d,x=f,w=d,b=g,y=m,v=g,A=m,S=f,T=0,C=0,M=0,I=0,k=0,E=0,F=0,R=0;if(0!=l){let t=s.MathUtils.cosDeg(l),e=s.MathUtils.sinDeg(l);T=t*p-e*x,C=e*p+t*x,F=t*w-e*b,R=e*w+t*b,k=t*y-e*v,E=e*y+t*v,M=k+(T-F),I=E+(C-R)}else T=p,C=x,F=w,R=b,k=y,E=v,M=A,I=S;T+=c,C+=u,M+=c,I+=u,k+=c,E+=u,F+=c,R+=u;var Y=0;j[Y++]=T,j[Y++]=C,j[Y++]=h.r,j[Y++]=h.g,j[Y++]=h.b,j[Y++]=h.a,j[Y++]=0,j[Y++]=1,this.twoColorTint&&(j[Y++]=0,j[Y++]=0,j[Y++]=0,j[Y++]=0),j[Y++]=M,j[Y++]=I,j[Y++]=h.r,j[Y++]=h.g,j[Y++]=h.b,j[Y++]=h.a,j[Y++]=1,j[Y++]=1,this.twoColorTint&&(j[Y++]=0,j[Y++]=0,j[Y++]=0,j[Y++]=0),j[Y++]=k,j[Y++]=E,j[Y++]=h.r,j[Y++]=h.g,j[Y++]=h.b,j[Y++]=h.a,j[Y++]=1,j[Y++]=0,this.twoColorTint&&(j[Y++]=0,j[Y++]=0,j[Y++]=0,j[Y++]=0),j[Y++]=F,j[Y++]=R,j[Y++]=h.r,j[Y++]=h.g,j[Y++]=h.b,j[Y++]=h.a,j[Y++]=0,j[Y++]=0,this.twoColorTint&&(j[Y++]=0,j[Y++]=0,j[Y++]=0,j[Y]=0),this.batcher.draw(t,j,G)}drawRegion(t,e,i,s,r,n){this.enableRenderer(this.batcher),n||(n=H);var a=0;j[a++]=e,j[a++]=i,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=t.u,j[a++]=t.v2,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a++]=0),j[a++]=e+s,j[a++]=i,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=t.u2,j[a++]=t.v2,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a++]=0),j[a++]=e+s,j[a++]=i+r,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=t.u2,j[a++]=t.v,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a++]=0),j[a++]=e,j[a++]=i+r,j[a++]=n.r,j[a++]=n.g,j[a++]=n.b,j[a++]=n.a,j[a++]=t.u,j[a++]=t.v,this.twoColorTint&&(j[a++]=0,j[a++]=0,j[a++]=0,j[a]=0),this.batcher.draw(t.page.texture,j,G)}line(t,e,i,s,r,n){this.enableRenderer(this.shapes),this.shapes.line(t,e,i,s,r)}triangle(t,e,i,s,r,n,a,o,l,h){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,i,s,r,n,a,o,l,h)}quad(t,e,i,s,r,n,a,o,l,h,c,u,d){this.enableRenderer(this.shapes),this.shapes.quad(t,e,i,s,r,n,a,o,l,h,c,u,d)}rect(t,e,i,s,r,n){this.enableRenderer(this.shapes),this.shapes.rect(t,e,i,s,r,n)}rectLine(t,e,i,s,r,n,a){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,i,s,r,n,a)}polygon(t,e,i,s){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,i,s)}circle(t,e,i,s,r,n=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,i,s,r,n)}curve(t,e,i,s,r,n,a,o,l,h){this.enableRenderer(this.shapes),this.shapes.curve(t,e,i,s,r,n,a,o,l,h)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let e=this.canvas;var i=window.devicePixelRatio||1,s=Math.round(e.clientWidth*i),r=Math.round(e.clientHeight*i);if(e.width==s&&e.height==r||(e.width=s,e.height=r),this.context.gl.viewport(0,0,e.width,e.height),t===K.Expand)this.camera.setViewport(s,r);else if(t===K.Fit){let t=e.width,i=e.height,s=this.camera.viewportWidth,r=this.camera.viewportHeight,n=r/s<i/t?s/t:r/i;this.camera.setViewport(t*n,i*n)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof N?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(R.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof W?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(R.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}var K;let J,Q;!function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(K||(K={}));let $=0;const tt=163;class et{constructor(t){if(this.logo=null,this.spinner=null,this.angle=0,this.fadeOut=0,this.fadeIn=0,this.timeKeeper=new s.TimeKeeper,this.backgroundColor=new s.Color(.135,.135,.135,1),this.tempColor=new s.Color,this.renderer=t,this.timeKeeper.maxDelta=9,!Q){let t=navigator.userAgent.indexOf("Safari")>-1,e=()=>$++;Q=new Image,Q.src=st,t||(Q.crossOrigin="anonymous"),Q.onload=e,J=new Image,J.src=it,t||(J.crossOrigin="anonymous"),J.onload=e}}dispose(){var t,e;null===(t=this.logo)||void 0===t||t.dispose(),null===(e=this.spinner)||void 0===e||e.dispose()}draw(t=!1){if($<2||t&&this.fadeOut>1)return;this.timeKeeper.update();let e=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=200*this.timeKeeper.delta*(1+1.5*Math.pow(e,5));let i=this.tempColor,s=this.renderer,r=s.canvas,n=s.context.gl;if(s.resize(K.Expand),s.camera.position.set(r.width/2,r.height/2,0),s.batcher.setBlendMode(n.ONE,n.ONE,n.ONE_MINUS_SRC_ALPHA),t){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>1)return;i.setFromColor(this.backgroundColor),e=1-this.fadeOut/1,e=1-(e-1)*(e-1),i.a*=e,i.a>0&&(s.camera.zoom=1,s.begin(),s.quad(!0,0,0,r.width,0,r.width,r.height,0,r.height,i,i,i,i),s.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(n.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),n.clear(n.COLOR_BUFFER_BIT)),e=1;e*=Math.min(this.fadeIn/1,1),i.set(e,e,e,e),this.logo||(this.logo=new o(s.context,Q),this.spinner=new o(s.context,J)),s.camera.zoom=Math.max(1,tt/r.height),s.begin(),s.drawTexture(this.logo,(r.width-165)/2,(r.height-108)/2,165,108,i),this.spinner&&s.drawTextureRotated(this.spinner,(r.width-tt)/2,(r.height-tt)/2,tt,tt,81.5,81.5,this.angle,i),s.end()}}let it="data:image/png;base64,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",st="data:image/png;base64,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";class rt{constructor(t,e){this.time=new s.TimeKeeper,e.pathPrefix||(e.pathPrefix=""),e.app||(e.app={loadAssets:()=>{},initialize:()=>{},update:()=>{},render:()=>{},error:()=>{}}),e.webglConfig&&(e.webglConfig={alpha:!0}),this.htmlCanvas=t,this.context=new r(t,e.webglConfig),this.renderer=new Z(t,this.context),this.gl=this.context.gl,this.assetManager=new l(this.context,e.pathPrefix),this.input=new k(t),e.app.loadAssets&&e.app.loadAssets(this);let i=()=>{requestAnimationFrame(i),this.time.update(),e.app.update&&e.app.update(this,this.time.delta),e.app.render&&e.app.render(this)},n=()=>{this.assetManager.isLoadingComplete()?this.assetManager.hasErrors()?e.app.error&&e.app.error(this,this.assetManager.getErrors()):(e.app.initialize&&e.app.initialize(this),i()):requestAnimationFrame(n)};requestAnimationFrame(n)}clear(t,e,i,s){this.gl.clearColor(t,e,i,s),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}}},299:function(t,e,i){var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,r)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&s(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(716)),o=i(953);window.onload=function(){var t=document.querySelector(".js-canvas");new a.SpineCanvas(t,{pathPrefix:"assets/spine-data/",app:new o.SpineApp})}},953:function(t,e,i){var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,r)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&s(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.SpineApp=void 0;var a=n(i(716)),o=i(56),l=function(){var t=this;this.pixelRatio=window.devicePixelRatio||1,this.loadAssets=function(t){t.assetManager.loadTextureAtlas("model.atlas"),t.assetManager.loadJson("model.json")},this.initialize=function(e){var i=e.assetManager,s=e.assetManager.require("model.atlas"),r=new a.AtlasAttachmentLoader(s),n=new a.SkeletonJson(r).readSkeletonData(i.require("model.json"));if(t.skeleton=new a.Skeleton(n),t.skeleton instanceof a.Skeleton){t.skeleton.scaleX=.5*t.pixelRatio,t.skeleton.scaleY=.5*t.pixelRatio,t.skeleton.x=0,t.skeleton.y=Math.floor(t.skeleton.data.height*t.skeleton.scaleY*t.pixelRatio)/2*-1;var l=new a.AnimationStateData(n);l.defaultMix=.1,t.state=new a.AnimationState(l),t.state instanceof a.AnimationState&&(t.state.setAnimation(0,"animation",!0),t.state.apply(t.skeleton),t.skeleton.updateWorldTransform(),e.input.addListener({down:function(i,s){if(t.skeleton instanceof a.Skeleton){var r=new o.SkeletonBounds;r.update(t.skeleton,!0);var n=r.containsPoint(i-e.gl.drawingBufferWidth/2,s-e.gl.drawingBufferHeight/2);console.log(n?"hit":"not hit")}}}))}},this.update=function(e,i){t.skeleton instanceof a.Skeleton&&t.state instanceof a.AnimationState&&(t.state.update(i),t.state.apply(t.skeleton),t.skeleton.updateWorldTransform())},this.render=function(e){if(t.skeleton instanceof a.Skeleton){var i=e.renderer;i.resize(a.ResizeMode.Expand),e.clear(.2,.2,.2,1),i.begin(),i.drawSkeleton(t.skeleton),i.end()}},this.error=function(t){console.log("error!!"),console.log(t)}};e.SpineApp=l}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,i),n.exports}i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};i(299)}();